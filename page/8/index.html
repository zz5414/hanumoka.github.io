<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://www.hanumoka.net').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

<!-- 구글 애드센스 코드  -->
<script data-ad-client="ca-pub-6388187282606796" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100596920-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-100596920-1');
</script>
 
<!-- 네이버 웹 마스터-->
<meta name="naver-site-verification" content="74bc91ee61c53c02f7d87ab3a442f99823f4f5f9">
  <meta name="description" content="아마추어 개발자의 블로그">
<meta property="og:type" content="website">
<meta property="og:title" content="Hanumoka, IT Blog">
<meta property="og:url" content="https://www.hanumoka.net/page/8/index.html">
<meta property="og:site_name" content="Hanumoka, IT Blog">
<meta property="og:description" content="아마추어 개발자의 블로그">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="Hanumoka">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.hanumoka.net/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Hanumoka, IT Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hanumoka, IT Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hanumoka, IT Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">그래봐야 코딩, 그래도 코딩</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>홈</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>태그</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>카테고리</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>아카이브</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>Sitemap</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/atom.xml" rel="section"><i class="fa fa-fw fa-rss"></i>rss</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>Commonweal 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/hanumoka" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/16/docker-20181116-docker-docker-basic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/16/docker-20181116-docker-docker-basic/" class="post-title-link" itemprop="url">Docker 개념정리</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-16 11:18:21" itemprop="dateCreated datePublished" datetime="2018-11-16T11:18:21+09:00">2018-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>서버관리나 엔지니어일을 해보지 않았지만, 웹 개발자 입장에서도 이 Docker라는건 상당히 흥미로워 보인다.</p>
<p>서버 운용에서의 Docker를 제외하더라도, 프로그래밍 개발할때 공용 개발환경과 같은 환경을 구성하기에 아주 요긴하게 사용될수 있을것 같다.</p>
<p>공부중이라 잘은 모르지만, 조금이라도 공부한 것들을 쉽게 잊지 않기위해 글을 남긴다.</p>
<h1 id="Docker란"><a href="#Docker란" class="headerlink" title="Docker란"></a>Docker란</h1><p><strong>Docker란 어플리케이션 프로세스를 독립적으로 실행시킬 수 있는 리눅스 컨테이너 환경이다.</strong></p>
<p><img src="/images/util/docker-logo.jpg" alt="도커로고"></p>
<p>위 Docker로고에서 저 고래가 Docker = Docker 엔진이고, 고래 등의 컨테이너 하나하나가 하나의 리눅스 컨테이너이다.</p>
<p>Docker가 무엇인지 대략적인 감을 잡으려면 기존의 가상머신 환경과 도커환경을 비교해 보는것이 가장 빠르다.</p>
<p><img src="/images/20181116-docker-docker-basic_1.png" alt="가상머신과 도커의 구조비교"></p>
<p>Docker Engine이 Hypervisor와 Guest OS를 대신한다. 음 아니다. 대신한다고 말하면 안되고 <strong>Hypervisor와 Guest OS가 필요 없게 만들어준다.</strong></p>
<p>기존의 가상화 환경을 예로들어 호스트 OS로 CentOS, 그 위에 GuestOS로 CentOS, 그리고 이 GuestOS에 Tomcat서버를 설치해서 서비스를 한다고 가정해보자.</p>
<p>저 중간의 GuestOS가 있음으로 인해서 장점은 GusetOS이미지로 서비스를 관리 하기때문에 HostOS와 독립적으로 이미지를 관리하여, 운영 및 유지보수에 용이하다는 점이다.</p>
<p>서버의 HostOS를 변경하면 GuestOS이미지를 떠서 백업하고 복구하면 그만인 것이다.</p>
<p>단점은,Guest OS전체를 가상화 해야 하기때문에 HostOS의 리소스를 GuestOS 가상화 구현에 많이 소모한다는 것이다. 그리고 이미지를 이식하기 위해서는 GuestOS가 포함되어 거대해진 용량의 이미지를 사용하게 된다.</p>
<p>Docker는 자바의 JVM과 비슷한 역할을 담당한다.</p>
<p>Docker는 Tomcat(리눅그 컨테이너)이 실행할수 있는 환경을 GuestOS대신 제공한다. 거기다 HostOS와 완벽히 분리된!</p>
<p>Tomcat이 실행하기 위한 커널 리소스 자원(CPU,메모리,디스크 등등)은 Docker가 대신 HostOS의 커널을 공유하여 제공한다.</p>
<p>이런 Docker의 아이디어는 새로운 아이디어가 아니다.<br>LXC(리눅스 컨테이너)라고 해서 이미 기존에 있던 기술이었고, Docker는 이것의 발전된 형태라고 보인다.</p>
<h1 id="Docker의-특징"><a href="#Docker의-특징" class="headerlink" title="Docker의 특징"></a>Docker의 특징</h1><ul>
<li><p>기존의 가상머신과 달리 도커 컨테이너는 성능의 손실이 거의 없어서, 차세대 클라우드 인프라 솔루션으로 주목받고 있다.</p>
</li>
<li><p>Go 언어로 만들어진 오픈소스 프로젝트이다. 기업용 유료 EE버전과 CE 무료버전이 존재한다.</p>
</li>
<li><p>도커의 핵심 프로젝트인 도커 엔진과 더불어 도커 컴포즈(Docker Compose), 레지스트리(Private Registry), 도커머신(Docker Machine), Kitematic등 다양한 부가 프로젝트가 존재한다.</p>
</li>
<li><p>이미지 공용 리파지토리인 Docker hub를 통해 Image를 다운받거나 공유할수 있다.</p>
</li>
<li><p>리눅스 컨테이너 환경이라 리눅스에 최적화 되어있지만, 2018요즘 Windows와 Mac에서도 Docker를 지원한다.</p>
</li>
</ul>
<h1 id="Docker-이미지와-컨테이너"><a href="#Docker-이미지와-컨테이너" class="headerlink" title="Docker 이미지와 컨테이너"></a>Docker 이미지와 컨테이너</h1><p>Docker에서는 서비스를 이미지로 관리한다.</p>
<p>이 이미지란 일종의 설치파일과 같다. Docker에 Ubuntu를 실행하고 싶다면 Ubuntu 이미지를 docker 허브에서 다운 받아오면 된다.</p>
<p>이 이미지에는 실행해야할 서비스관련 파일과 그 서비스가 동작하기 위해서 필요한 라이브리러를 포함하고 있다.</p>
<p>그리고 이 이미지로 컨테이너라는 것을 생성 할수 있다.</p>
<p>이 컨테이너는 이미지로 설치된 실제 동작이 가능한 서비스라고 보면 된다.</p>
<p>이미지로 컨테이너를 생성하면 해당 이미지의 목적에 맞는 파일이 들어 있는 파일시스템과 격리된 시스템 자원 및 네트워크를 사용할 수 있는 독립된 공간이 생성되고, 이것이 바로 도커 컨테이너이다.</p>
<p>컨테이너는 이미지를 읽기 전용으로 사용하되 이미지에서 변경된 사항만 컨테이너 계층에 저장한다.</p>
<p>따라서 컨테이너의 작업은 원본 이미지에게 영향을 주지 않으며, 생성된 각 컨테이너는 각기 독립된 파일시스템을 도커엔진으로부터 제공받아 완벽하게 호스트OS와 분리되게 된다.</p>
<p>도커엔진에 의해 효과적으로 HostOS의 자원을 사용하고, HostOs와 완벽히 격리된 환경에서 컨테이너 단위로 서비스를 실행할수 있기 때문에 서비스의 관리, 확장, 공유, 유지보수등이 용이하다.</p>
<h1 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h1><p>Docker는 개념과 명령어만 알면 아주 쉽고 간편하게 원하는 서비스를 가상화로 돌릴수 있다.<br>그것도 아주 가볍게!<br>정확하지는 않지만 유튜브에서 듣기로는 Host서비스의 거이 98프로 정도의 성능을 낸다고 한다.<br>사실인지는 모르겠지만, 내가 직접 써보니 확실히 체감이 된다.</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/16/java-20181116-java-for-each/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/16/java-20181116-java-for-each/" class="post-title-link" itemprop="url">java-향상된 for 문(for each)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-16 07:39:35" itemprop="dateCreated datePublished" datetime="2018-11-16T07:39:35+09:00">2018-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>for each 문은 java5 부터 배열 및 컬랙션 등을 쉽게 처리하기 위해 추가된 문법이다.</p>
<p>음 난 왜 생소하지… javascript에서만 보던 건데… 여튼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String[] numbers = &#123;<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(String number : numbers)&#123;</span><br><span class="line">  System.out.println(<span class="string">"number:"</span> + number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>아주 간단하다. 기존의 for문의 <strong>초기값; 조건; 증가감식</strong> 등의 statment 대신 <strong>타입명 인덱스별명 : 배열이나 컬랙션</strong> 형태의 statement를 사용한다.</p>
<p>음 numbers의 타입으로 타입을 컴파일러가 유추할수 있을텐데, 굳이 타입명을 명시하게 하는 것은 조금 의아하다.</p>
<p>여튼 단순히 배열, 컬랙션 등을 순차적으로 돌리고 싶을때 간편하게 사용할 수 있다.</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/16/java-20181116-java-break-label/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/16/java-20181116-java-break-label/" class="post-title-link" itemprop="url">java - break label:(충접 루프 탈출)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-16 07:19:33" itemprop="dateCreated datePublished" datetime="2018-11-16T07:19:33+09:00">2018-11-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>java의 break문은 가장 가까운 반복문만 종료하고 바깥쪽 반복문은 종료시키지 못한다.</p>
<p>중첩된 반복문을 탈출하기 위해서는 <strong>break 라벨명;</strong> 을 사용 하면된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Outter: <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)&#123;</span><br><span class="line">    System.out.println(<span class="string">"중첩 루푸 동작중 i:"</span> + i + <span class="string">"j:"</span> + j);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(i == <span class="number">2</span>)&#123;</span><br><span class="line">      <span class="keyword">break</span> Outter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;<span class="comment">// _for</span></span><br><span class="line">&#125;<span class="comment">// _for</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/20181116-java-break-label_1.png" alt="위 코드 실행 결과"></p>
<p>별 내용은 아니지만, 자꾸 문법을 까먹어서 정리한다.</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/14/docker-20181114-docker-ubuntu-nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/14/docker-20181114-docker-ubuntu-nginx/" class="post-title-link" itemprop="url">Docker에 Ubuntu에 nginx올려 웹서버 동작시키기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-14 10:33:05" itemprop="dateCreated datePublished" datetime="2018-11-14T10:33:05+09:00">2018-11-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <!-- TOC -->

<ul>
<li><a href="#들어가기">들어가기</a></li>
<li><a href="#실습">실습</a></li>
<li><a href="#마무리">마무리</a></li>
</ul>
<!-- /TOC -->

<h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>이번에는 Windows for Docker를 이용해서 Ubuntu 도커 이미지에 nginx를 설치하여 Ubuntu 도커 컨테이너에서 웹서버를 동작시키고, 호스트OS에서 브라우저로 접근해보려 한다.<br>사실 centos이미지를 사용하려 했으나, docker hub에 공유된 공식 centos 이미지는 뭔가 결핍된? 최소화된 상태의 이미지라 뭔가 docker file을 통해 전처리를 해야 하는 작업이 필요했다.<br>그래서 귀찮아서 centos를 ubuntu로 대체했다.</p>
<p>테스트 해본결과 centos 공식 이미지에 systemctl 명령어가 동작을 하지 않았었다.</p>
<p>docker를 사용하니 단순히 nignx 이미지를 가지고 웹서버를 돌릴수도 있을 것이다.<br>하지만 어떤 특정 서비스를 동작시키기 위해서 여러가지 다른 프로그램이나 기타 설정들이 필요 할 수도 있다.</p>
<p>ubuntu이미지 기반에 nginx를 설치하는 형태로 서비스를 만들경우, ubuntu의 패키지 메니저를 사용할수 있기 때문에 기타적인 프로그램 설치, 연동, 설정등이 쉬워진다.</p>
<h1 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>위 명령어로 현재 호스트에 설치된 docker 이미지를 검색해보자.</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_1.png" alt="docker images"></p>
<p>음 우분투가 없다.<br>다음 명령어로 docker hub에 ubuntu를 검색하자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search ubuntu</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181114-docker-ubuntu-nginx_2.png" alt="docker search ubuntu 결과"></p>
<p>끙… 지금 docker hub쪽 서버가 좀 이상한지 docker search 명령어 응답이 재대로 안나온다.</p>
<p>대신 windows for docker의 kitematic에서 ubuntu 이미지를 검색하면 공식 우분투 이미지를 확인 할 수 있다.</p>
<p>끙 근데 역시 도커 허브 서버가 이상한지 이미지를 다운로드 할수가 없다.</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_3.png" alt="음 docker hub가 간혹 맛탱이가 가는듯 하다."></p>
<p>이럴 때는 … 나중에 다시 하자.</p>
<p>A FEW MOMENTS LATER…</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_4.png" alt="잉?"></p>
<p>한 참뒤에도 안되서, 다시 kitematic에 들어가니 갑작이 docker hub 계정을 물어본다.</p>
<p>음 뭔가 전에 입력된 것이 초기화 된듯 하다.</p>
<p>아 시발 또 안된다. </p>
<p>A FEW MOMENTS LATER…</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_5.png" alt="으 마침내 된다."></p>
<p>검색된 이미지중 ubuntu 공식 이미지를 다운받자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu</span><br></pre></td></tr></table></figure>

<p>위 명령어를 입력하면 자동으로 해당 이미지의 최신 tag 이미지를 받는다.</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_6.png" alt="다운로드 한뒤 docker images로 조회해 보면 이미지가 다운로드 된 것을 확인 할수있다."></p>
<p>다음 명렁어로 ubuntu이미지를 컨테이너로 동작시키자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name ubunto-nginx -p 80:80 -p 443:443 -i -t ubuntu /bin/bash</span><br></pre></td></tr></table></figure>

<p>먼가 dockerfile을 사용하면 다양한 설정이 간편하게 다양한 설정을 가능할것 같은데, 아직 내가 공부가 부족해서 일단 이렇게 docker 명령어로 진행하겠다.<br>위 명렁어를 입력하면 바로 컨테이너가 실행되며 그 컨테이너의 쉘에 진입하게 된다.</p>
<p>아래 명렁어를 순서대로 입력해자.<br>별 내용은 없어 모든 과정 화면 캡쳐는 생략한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-get update   #패키지 메니지 업데이트</span><br><span class="line">apt-get install curl    #쉘에서 url 접근을 위해 설치, 웹서버 동작 테스트용</span><br><span class="line">apt-get install nginx   #nginx 설치</span><br><span class="line">service nginx start     #nginx 웹서버 동작</span><br><span class="line">curl -X GET http://127.0.0.1:80   #우분투 도커 컨테이너 내부에서 nginx 서버 동작 확인.</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181114-docker-ubuntu-nginx_7.png" alt="우분투 컨테이너 내에서 nginx 웹서버의 동작을 확인했다."></p>
<p>그럼 우분투 컨테이너 내부가 아닌 호스트 OS인 windows에서 접속이 되는지 확인해 보자.</p>
<p><img src="/images/20181114-docker-ubuntu-nginx_8.png" alt="호스트 OS인 윈도우에서 브라우저로 우분투 컨테이너의 웹서버 접근 결과"></p>
<p>오 잘 된다.<br>끝!</p>
<h1 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h1><p>음 인프라 관련 일을 해본적도 없고, 공부도 별로 못했고 그냥저냥 재미로 docker를 보고 있지만 뭔가 docker를 쉽게 사용하기 위해서는 서비스 단독 이미지를 사용하는 것보다 ubuntu와 같은 패키지 메니저가 설치된 이미지 기반에 서비스를 설치해서 사용하는 것이 편해보인다.</p>
<p>평소에 잘 안쓰던 리눅스 공부도 되고 일석이조인듯….</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/13/vue-20181113-vue-how-to-make-vue-express-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/13/vue-20181113-vue-how-to-make-vue-express-project/" class="post-title-link" itemprop="url">Vue와 Express를 합쳐서 통합 프로젝트 만들기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-13 06:37:53" itemprop="dateCreated datePublished" datetime="2018-11-13T06:37:53+09:00">2018-11-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index">
                    <span itemprop="name">vue</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>이 글은 Vue 프로젝트와 Express 프로젝트를 연동하는 예제이다.</p>
<h2 id="Vue-Express-Node-통합-프로젝트-환경-만들기"><a href="#Vue-Express-Node-통합-프로젝트-환경-만들기" class="headerlink" title="Vue Express Node 통합 프로젝트 환경 만들기"></a>Vue Express Node 통합 프로젝트 환경 만들기</h2><p>Vue를 프론트엔드로, Express를 백엔드로 개발할때 어떻게 프로젝트를 잡아야 할까 고민중 구글링에서 거이 완벽한 예제를 찾았다.</p>
<p><a href="http://vuejs.kr/2017/02/05/express-with-vue/" target="_blank" rel="external nofollow noopener noreferrer">vue express 통합예제 참조사이트</a>.</p>
<h3 id="실습할것에-대한-대략적-구성"><a href="#실습할것에-대한-대략적-구성" class="headerlink" title="실습할것에 대한 대략적 구성"></a>실습할것에 대한 대략적 구성</h3><p>구체적일 실습전 맥락을 집고 넘어가자.</p>
<p><img src="/images/20181113-project-band-of-coder_1.png" alt="프로젝트폴더 구성"></p>
<p>위 처럼 폴더구조를 잡을 것이다.</p>
<p>최상위 폴더는 프로젝트 폴더가 되며, 그 아래 폴더 backend는 express프로젝트 폴더, frontend 폴더는 vue(webpack) 프로젝트 폴더가 된다.</p>
<p>backend, frontend는 각각 독립적으로 동작이 가능하다.</p>
<p>하지만 내가 원하는 것은 express와 vue의 통합된 프로젝트 개발환경이다.</p>
<p>이 부분은 vue를 웹팩으로 빌드 하여 그 결과물을 backend즉 express 프로젝트의 public에 배포한다.<br>그리고 express의 router가 빌드된 vue프로젝트의 vue router와 연동시킨다.</p>
<p>대충 와꾸는 이정도이다. 이제 코딩을 해보자.</p>
<h3 id="vue-프로젝트로-frontend-폴더-생성하기"><a href="#vue-프로젝트로-frontend-폴더-생성하기" class="headerlink" title="vue 프로젝트로 frontend 폴더 생성하기"></a>vue 프로젝트로 frontend 폴더 생성하기</h3><p>앞서 말했듯이 일단 프로젝트 폴더를 하나 만들어 준다.<br>난 band_of_coder 라고 만들었다.<br>그리고 cmd를 만든 프로젝트 경로로 이동하여 Vue cli를 통해서 vue webpack 프로젝트를 생성하자.</p>
<p>명령어는 다음과 같다.<br>vue-cli의 설치가 필요하다.<br>그리고 webpack을 사용할 예정이므로 반드시 webpack 기반으로 만들어 주자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g vue-cli  #설치하지 않은 경우</span><br><span class="line">vue init webpack frontend #vue webpack 프로젝트를 frontend 폴더에 생성한다.</span><br></pre></td></tr></table></figure>

<p>위 명령어를 입력하면 아래처럼 vue 프로젝트 설정들을 물어본다.</p>
<p><img src="/images/20181113-project-band-of-coder_2.png" alt="vue-cli프로젝트 생성시 셋팅"></p>
<p>중요한 것은 vue-router 설치를 반드시 해야 한다.<br>나머지는 알아서 하길 바란다.<br>나는 EsLint, unit test, Nightwatch등은 설치하지 않았다.<br>해당 내용을 잘 모르고, 프로젝트 실행시 내가 잘 모르는 메세지가 너무 많이 나와서이다.<br>마지막 Yes, use NPM 을 선택하면 프로젝트를 생성하며 알아서 npm install 까지 해준다.</p>
<p><img src="/images/20181113-project-band-of-coder_3.png" alt="프로젝트 생성 완료후 메세지"></p>
<p><img src="/images/20181113-project-band-of-coder_4.png" alt="frontend폴더가 내부모습"></p>
<p>frontend 경로로 이동해서 다음 명령어로 생성된 vue 프로젝트가 동작하는지 확인해 보자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd frontend</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_5.png" alt="npm run dev 결과"></p>
<p><a href="http://locallhost:8080" target="_blank" rel="external nofollow noopener noreferrer">http://locallhost:8080</a> 에 접속해보자.</p>
<p><img src="/images/20181113-project-band-of-coder_6.png" alt="vue프로젝트 동작확인"></p>
<h3 id="vue-프로젝트에서-Vue-router-테스트하기"><a href="#vue-프로젝트에서-Vue-router-테스트하기" class="headerlink" title="vue 프로젝트에서 Vue-router 테스트하기"></a>vue 프로젝트에서 Vue-router 테스트하기</h3><p>Vue-router가 동작하는지 실습해보자.</p>
<p>frontend 폴더를 atom으로 열자.<br>frontend/src/components 폴더에 HellowWorld.vue파일을 삭제하고 IndexPage.vue, LoginPage.vue 파일을 새로 만들자.(vue 확장자는 반드시 소문자를 써야 한다.)<br>HelloWorld.vue파일은 제거한다.</p>
<p><strong>LoginPage.vue 파일내용</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>로그인 페이지입니다.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>IndexPage.vue 파일내용</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"html"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>인덱스 페이지입니다.!!!!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>그리고 src/router/index.js 파일을 아래처럼 수정한다.<br>router 폴더는 vue init webpack 명령어로 vue 프로젝트를 생성할때 Vue-router 를 설치하면 자동으로 생성된다.<br>그리고 src/router/index.js 파일은 Vue Router 관련 내용을 가지고 있다.</p>
<p><strong>index.js 파일내용</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> IndexPage <span class="keyword">from</span> <span class="string">'@/components/IndexPage'</span></span><br><span class="line"><span class="keyword">import</span> LoginPage <span class="keyword">from</span> <span class="string">'@/components/LoginPage'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'IndexPage'</span>,</span><br><span class="line">      component: IndexPage</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/loginPage'</span>,</span><br><span class="line">      name: <span class="string">'LoginPage'</span>,</span><br><span class="line">      component: LoginPage</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_7.png" alt="위 수정내용을 적용한 모습니다."></p>
<p>다시 브라우저에서 <a href="http://localhost:8080/" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080/</a> 와 <a href="http://localhost:8080/loginPage" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080/loginPage</a> 로 접근해서 라우팅이 되는지 확인해 보자.</p>
<p>물론 npm run dev 명령으로 frontend(vue프로젝트)를 실행시켜야 한다.</p>
<p><img src="/images/20181113-project-band-of-coder_8.png" alt="Vue-router동작 확인"></p>
<p>일단 vue 프로젝트는 생성을 완료 했다.</p>
<h3 id="Express-프로젝트로-backend폴더-생성하기"><a href="#Express-프로젝트로-backend폴더-생성하기" class="headerlink" title="Express 프로젝트로 backend폴더 생성하기"></a>Express 프로젝트로 backend폴더 생성하기</h3><p>cmd로 프로젝트폴더 band_of_coder 로 이동하자.<br>그리고 다음 명령어로 express 프로젝트를 생성하자.<br>express cli프로젝트를 생성하려면 express-generator를 먼저 설치해야 한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install express-generator -g #설치하지 않은 경우</span><br><span class="line">express --view=pug backend</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 프로젝트 생성 완료</span></span><br><span class="line"></span><br><span class="line">cd backend</span><br><span class="line">npm install   </span><br><span class="line">DEBUG=backend:* npm start # express 실행명령어</span><br></pre></td></tr></table></figure>

<p>위 코드를 보면 npm install 이후 express 실행 까지 한다.</p>
<p><img src="/images/20181113-project-band-of-coder_9.png" alt="backend 폴더 내용"></p>
<p><img src="/images/20181113-project-band-of-coder_10.png" alt="express 프로젝트 생성 과정"></p>
<p>브라우저에서 <a href="http://localhost:3000" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:3000</a> 로 접근해서 동작을 확인하자.</p>
<p><img src="/images/20181113-project-band-of-coder_11.png" alt="express 프로젝트 실행결과"></p>
<h3 id="Vue프로젝트와-Express프로젝트를-연동하기"><a href="#Vue프로젝트와-Express프로젝트를-연동하기" class="headerlink" title="Vue프로젝트와 Express프로젝트를 연동하기"></a>Vue프로젝트와 Express프로젝트를 연동하기</h3><p>현재 Vue프로젝트는 frontend 폴더에 존재하며, 자체적인 웹서버를 localhost:8080을 사용하고 있다.<br>그리고 express 프로젝트는 backend 폴더에 존재하며, 자체적인 웹서버 locahost:3000을 사용하고 있다.</p>
<p>즉 두개의 웹서버가 동작하는데, Vue 프로젝트의 웹서버를 사용하지 않을 생각이다.<br>Vue 프로젝트를 webpack으로 번들링하여 그 결과물을 express프로젝트 backend폴더의 public으로 전달할 것이다.<br>그리고 express 프로젝트가 동작할때 자신의 템플릿 엔진인 pug를 사용하지 않고, 이 public의 vue 빌드 결과물을 라우팅하게 설정 할것이다.<br>express 프로젝트의 웹서버에 오는 요청은 express router가 받아서 public폴더에 빌드된 vue 프로젝트의 vue router 에 전달되게 된다.<br>(사실 vue router의 내부적인 매커니즘을 정확히 몰라서 위 내용은 틀린 내용일 수도 있다.)</p>
<h4 id="Vue-프로젝트를-webpack으로-빌드할때-그-경로를-backend로-전달하기"><a href="#Vue-프로젝트를-webpack으로-빌드할때-그-경로를-backend로-전달하기" class="headerlink" title="Vue 프로젝트를 webpack으로 빌드할때 그 경로를 backend로 전달하기"></a>Vue 프로젝트를 webpack으로 빌드할때 그 경로를 backend로 전달하기</h4><p>vue 프로젝트를 webpack으로 빌드할때 그 결과물을 frontend 폴더가 아닌, express의 backend 폴더의 public으로 바꿔 보자.</p>
<p>frontend 폴더의 config/index.js 파일을 열어 build 영역을 다음과 같이 수정하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">build: &#123;</span><br><span class="line">    <span class="comment">// Template for index.html</span></span><br><span class="line">    <span class="comment">//index: path.resolve(__dirname, '../dist/index.html'),   기존에 있는 것을 주석처리</span></span><br><span class="line">    index: path.resolve(__dirname, <span class="string">'../../backend/public/index.html'</span>),  <span class="comment">//수정되는 부분이다.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Paths</span></span><br><span class="line">    <span class="comment">//assetsRoot: path.resolve(__dirname, '../dist'),  기존에 잇는 것을 주석처리</span></span><br><span class="line">    assetsRoot: path.resolve(__dirname, <span class="string">'../../backend/public'</span>),   <span class="comment">// 수정되는 부분이다.</span></span><br><span class="line">    assetsSubDirectory: <span class="string">'static'</span>,</span><br><span class="line">    assetsPublicPath: <span class="string">'/'</span>,</span><br></pre></td></tr></table></figure>

<p>위 소스의 수정되는 부분을 보면 경로가 backend/public을 가리키는 것을 확인 할 수 있다.</p>
<p><img src="/images/20181113-project-band-of-coder_12.png" alt="vue webpack 빌드 설정 변경결과"></p>
<p>그럼 이제 vue 프로젝트를 빌드해서 그 내용이 backend/public에 재대로 꽂히는지 확인해보자.<br>일단 기존 backend/public 폴더 내용을 깨끗이 지우자.</p>
<p>그리고 cmd로 frontend경로로 이동하여 <strong>npm run build</strong> 명령으로 vue 프로젝트를 빌드하자.<br>빌드 결과물이 backend/public 폴더 내부에 생기는지 확인해 보자.</p>
<p>주의 할 점은 express 서버가 동작중에 빌드시 오류가 발생할수 있으므로, express 서버를 종료하고 빌드하자.</p>
<p><img src="/images/20181113-project-band-of-coder_13.png" alt="frontend에서 npm run build 명령어 실행"></p>
<p><img src="/images/20181113-project-band-of-coder_14.png" alt="backend/public 폴더에 빌드 결과물 확인"></p>
<h4 id="Express-프로젝트에서-router수정하여-vue-router연결"><a href="#Express-프로젝트에서-router수정하여-vue-router연결" class="headerlink" title="Express 프로젝트에서 router수정하여 vue router연결"></a>Express 프로젝트에서 router수정하여 vue router연결</h4><p>이제 Express 프로젝트를 조금 수정해야 한다.</p>
<p>일단 backend/routes/index.js 파일을 아래처럼 수정하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.sendFile(path.join(__dirname, <span class="string">'../public'</span>, <span class="string">'index.html'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<p>Express의 라우터로 접근하면 public에 있는 index.html을 전달하게 설정했다.</p>
<p>Vue router를 Node+Express 웹서버에 연동하는 설정이 필요하다.<br>이부분의 자세한 내용은 다음을 참조하자.<br>nginx나 apache등 기타 웹서버와의 연동설정도 설명해준다.<br><a href="https://router.vuejs.org/kr/guide/essentials/history-mode.html#서버-설정-예제" target="_blank" rel="external nofollow noopener noreferrer">https://router.vuejs.org/kr/guide/essentials/history-mode.html#서버-설정-예제</a></p>
<p>설명을 보면 vue router와 express연동을 위해 express에 <strong>connect-history-api-fallback</strong>라는 모듈이 필요하다.</p>
<p>git bash 터미널로 backend 폴더에 진입해서 아래 명령어로 connect-history-api-fallback를 설치하자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install connect-history-api-fallback -save</span><br></pre></td></tr></table></figure>

<p>그리고 beckend 폴더의 app.js 파일에 connect-history-api-fallback 모듈을 등록하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="built_in">require</span>(<span class="string">'connect-history-api-fallback'</span>)());</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_15.png" alt="backend app.js에 모듈 추가"></p>
<h3 id="vue-express-통합환경-동작-확인하기"><a href="#vue-express-통합환경-동작-확인하기" class="headerlink" title="vue express 통합환경 동작 확인하기"></a>vue express 통합환경 동작 확인하기</h3><p>이제 설정은 거진 다 끝났다.<br>vue 프로젝트의 웹서버는 이제 필요 없으니 종료하자.<br>git bash 터미널로 backend폴더에 진입해서 DEBUG=backend:* npm start 를 입력하여, express 를 실행하자.</p>
<p>그리고 브라우저에서 <a href="http://localhost:3000/" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:3000/</a> 와 <a href="http://localhost:3000/loginPage" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:3000/loginPage</a> 로 접근해 보자.<br>epxress 서버에 접근하지만 실제 url은 vue router 에 등록된 url을 사용한다는 것을 주의하자.</p>
<p><img src="/images/20181113-project-band-of-coder_16.png" alt="vue express 통합결과 확인"></p>
<p>위 결과를 보면 분명 3000포트로 즉 express프로젝트 접속으로 vue프로젝트의 vue-router가 동작하는 것을 확인 할수있다.</p>
<p>정말 frontend는 싱기방기하다.</p>
<hr>
<h2 id="Vue-Express의-데이터-통신해보기"><a href="#Vue-Express의-데이터-통신해보기" class="headerlink" title="Vue Express의 데이터 통신해보기"></a>Vue Express의 데이터 통신해보기</h2><p>Express의 Router가 Vue의 Router로 연결되는것 까지 확인했다.<br>이제 해야 할 것은 Vue에서 Rest요청을 Express Router에게 보내고 응답을 받는 것이다.</p>
<p>역시 아래 자료를 따라서 실습했다.<br><a href="http://vuejs.kr/2017/02/05/express-with-vue/" target="_blank" rel="external nofollow noopener noreferrer">http://vuejs.kr/2017/02/05/express-with-vue/</a></p>
<h3 id="Express-backend폴더-수정하기"><a href="#Express-backend폴더-수정하기" class="headerlink" title="Express backend폴더 수정하기"></a>Express backend폴더 수정하기</h3><p>일단 beckand/movies.json 파일을 만들고, 내용을 아래처럼 채운다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"공조"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"김성훈"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79416/79416_185.jpg"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"컨택트"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"드니 빌뇌브"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79437/79437_185.jpg"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"더킹"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"한재림"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79423/79423_185.jpg"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"모아나"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"론 클레멘츠, 존 머스커"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79316/79316_185.jpg"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"라이언"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"가스 데이비스"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79396/79396_185.jpg"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"너의 이름은"</span>,</span><br><span class="line">    <span class="attr">"year"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"director"</span>: <span class="string">"신카이 마코토"</span>,</span><br><span class="line">    <span class="attr">"poster"</span>: <span class="string">"http://img.cgv.co.kr/Movie/Thumbnail/Poster/000079/79313/79313_1000.jpg"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>위 데이터는 express 서버가 vue로 전달할 데이터이다.</p>
<p>위 데이터를 실제 전달할 express router 파일을 만들어야 한다.</p>
<p>backend/routes/movies.js 파일을 만들고 내용을 아래처럼 채운다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> movies = <span class="built_in">require</span>(<span class="string">'../movies.json'</span>);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"========무비 인덱스==========="</span>);</span><br><span class="line">  res.send(movies);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/:id'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = <span class="built_in">parseInt</span>(req.params.id, <span class="number">10</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"========무비 쇼=========== id:"</span>+ id);</span><br><span class="line">  <span class="keyword">var</span> movie = movies.filter(<span class="function"><span class="keyword">function</span> (<span class="params">movie</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> movie.id === id</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.dir(movie);</span><br><span class="line">  res.send(movie)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>

<p>하나는 전체 데이터를, 그 아래 라우터는 특정 아이디 데이터만 뷰에 전달한다.</p>
<p>그리고 지금 movies.js 파일을 express app.js 에 적용해야 한다.</p>
<p>아래 내용을 backend/app.js 파일애 아래 내용을 추가하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> moviesRouter = <span class="built_in">require</span>(<span class="string">'./routes/movies'</span>);  <span class="comment">// vue에 데이터를 전달할 테스트 라우터 </span></span><br><span class="line">app.use(<span class="string">'/api/movies'</span>, moviesRouter);</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_17.png" alt="bacnend/app.js 수정화면"></p>
<p>frontend의 vue에서 <a href="http://localhost:3000/api/movies" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:3000/api/movies</a> 또는 <a href="http://localhost:3000/api/movies/1" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:3000/api/movies/1</a> </p>
<p>이런식으로 요청을 위 express 라우터가 처리하게 된다.</p>
<h3 id="Vue-frontend-폴더-수정하기"><a href="#Vue-frontend-폴더-수정하기" class="headerlink" title="Vue frontend 폴더 수정하기"></a>Vue frontend 폴더 수정하기</h3><p>frontend/config/index.js 파일의 proxyTable 영역을 수정해야 한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">proxyTable: &#123;</span><br><span class="line">  <span class="string">'/api'</span>: &#123;</span><br><span class="line">    target: <span class="string">'http://localhost:3000/api'</span>,</span><br><span class="line">    changeOrigin: <span class="literal">true</span>,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">      <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_18.png" alt="frontend/config/index.js 수정화면"></p>
<p>솔직히 저 proxyTable이 정확히 무엇인지 모르겠다. 조만간 따로 공부해야 할듯.</p>
<p>대충 느낌은 vue에서 /api로 시작하는 요청이 발생했을 경우 target으로 리다이렉팅 해주는 것 같다.</p>
<p>proxytable 참고자료 <a href="http://vuejs-templates.github.io/webpack/proxy.html" target="_blank" rel="external nofollow noopener noreferrer">http://vuejs-templates.github.io/webpack/proxy.html</a></p>
<p>그리고 axios 모듈을 추가해야 한다.</p>
<p>일단 아래 명령어로 forntend 에 axios 모듈을 추가하자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios --save</span><br></pre></td></tr></table></figure>

<p>그리고 frontend/src/main.js 파일에 아래 내용을 추가하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">Vue.prototype.$http = axios</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_19.png" alt="frontend/src/main.js 수정화면"></p>
<p>이제 실제 express에 데이터를 요청하는 vue화면을 만들자.</p>
<p>아래 두 파일을 만들자.</p>
<p>frontend/src/components/MovieIndexPage.vue  데이터 전체조회 화면<br>frontend/src/components/MovieShowpage.vue   특정 데이터 조회 화면</p>
<p><strong>MovieIndexPage.vue 내용</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"movies"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>영화 목록<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"movie in movies"</span> <span class="attr">class</span>=<span class="string">"movie"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">"movie.poster"</span> <span class="attr">class</span>=<span class="string">"poster"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>, <span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> []</span><br><span class="line">        <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; name: 'show', params: &#123; id: movie.id &#125;&#125;"</span>&gt;</span>더보기<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  created () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">this</span>.$http.get(<span class="string">'/api/movies'</span>)</span></span><br><span class="line"><span class="javascript">    .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.movies = response.data</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      movies: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>MovieShowPage.vue 내용</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>상세 내용<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      &#123;&#123;movie&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  created: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> id = <span class="keyword">this</span>.$route.params.id</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$http.get(<span class="string">`/api/movies/<span class="subst">$&#123;id&#125;</span>`</span>)</span></span><br><span class="line"><span class="javascript">    .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.movie = response.data</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="actionscript">  data: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      movie: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/20181113-project-band-of-coder_20.png" alt="vue 파일 추가화면"></p>
<p>이제 이 두 파일을 vue-router에 적용한다.</p>
<p>frontend/src/router/index.js 파일에 위 두 파일을 추가하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> IndexPage <span class="keyword">from</span> <span class="string">'@/components/IndexPage'</span></span><br><span class="line"><span class="keyword">import</span> LoginPage <span class="keyword">from</span> <span class="string">'@/components/LoginPage'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MovieIndexPage <span class="keyword">from</span> <span class="string">'@/components/MovieIndexPage'</span></span><br><span class="line"><span class="keyword">import</span> MovieShowPage <span class="keyword">from</span> <span class="string">'@/components/MovieShowPage'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'IndexPage'</span>,</span><br><span class="line">      component: IndexPage</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/loginPage'</span>,</span><br><span class="line">      name: <span class="string">'LoginPage'</span>,</span><br><span class="line">      component: LoginPage</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/movie'</span>,</span><br><span class="line">      name: <span class="string">'MovieIndexPage'</span>,</span><br><span class="line">      component: MovieIndexPage</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/movie/:id'</span>,</span><br><span class="line">      name: <span class="string">'MovieShowPage'</span>,</span><br><span class="line">      component: MovieShowPage</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>URL이 어떻게 돌아가는지 잠깐 정리해 보자.</p>
<p>1.브라우저에서 localhost:3000/movie 접근</p>
<p>2.vue rounter가 MovieIndexPage를 응답</p>
<p>3.MovieIndexPage vue 컴포넌트에서 localhost:3000/api/movies 를 서버에 요청</p>
<p>4.vue rounter에서 /api 를 인식후 요청을 express서버 router에 전달.</p>
<p>5.express router가 MovieIndexPage 뷰 컴포넌트에 응답.</p>
<p>이제 frontend의 vue프로젝트를 빌드하고, backend의 express프로젝트를 동작시키고 결과를 확인해 보자.</p>
<p>express 서버를 실행시키고, 브라우저에서 localhost:3000/movie 그리고 localhost:3000/movie/1 접근하여 동작을 확인하자.</p>
<p><img src="/images/20181113-project-band-of-coder_21.png" alt="결과확인"></p>
<h1 id="위-예제-Github-리파지토리"><a href="#위-예제-Github-리파지토리" class="headerlink" title="위 예제 Github 리파지토리"></a>위 예제 Github 리파지토리</h1><p>하도 안된다시는 분들이 계서서, 만들어 올립니다.</p>
<p>100프로 위 예제로 만든 프로젝트입니다.</p>
<p><a href="https://github.com/hanumoka/VueExpressNode" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/hanumoka/VueExpressNode</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/12/javascript-20181112-javascript-promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/12/javascript-20181112-javascript-promise/" class="post-title-link" itemprop="url">javascript - Promise(콜백의 진화형)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-12 00:32:09" itemprop="dateCreated datePublished" datetime="2018-11-12T00:32:09+09:00">2018-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Promise란"><a href="#Promise란" class="headerlink" title="Promise란"></a>Promise란</h1><p>Promise는 javascript의 callback의 단점을 해결 하기 위한 1단계 진화형 형태이다.<br><strong>프라미스가 콜백을 대체하는 것은 아니다. 사실 프라미스에서도 콜백을 사용한다.</strong><br>프라미스는 콜백을 예측 가능한 패턴으로 사용할수 있게 하며, 프라미스 없이 콜백만 사용했을 때 나타날 수 있는 엉뚱한 현상이나 찾기 힘든 버그를 해결할수 있다.<br><strong>특히 보기싫은 중첩콜백과 콜백헬을 해결해준다.</strong></p>
<hr>
<h1 id="Promise의-기본개념"><a href="#Promise의-기본개념" class="headerlink" title="Promise의 기본개념"></a>Promise의 기본개념</h1><p><strong>프라미스 기반 비동기적 함수를 호출하면 그 함수는 Promise 인스턴스를 반환한다.</strong><br>프라미스는 성공(fulfilled)하거나, 실패(rejected)하거나 단 두 가지뿐이다.<br>프라미스는 성공 혹은 실패 둘 중 하나만 일어난다고 확신할 수 있다.<br>성공한 프라미스가 나중에 실패하는 일 같은 건 절대 없다.<br>또한, 성공이든 실패든 단 한 번만 일어난다.<br>프라미스가 성공하거나 실패하면 그 프라미스를 결정됬다(settled)고 한다.</p>
<p>프라미스는 객체이므로 어디든 전달할 수 있다는 점도 콜백에 비해 간편한 장점이다.<br>비동기적 처리를 여기서 하지 않고 다른 함수에게(또는 다른 동료가) 처리하게 하고 싶다면 프라미스를 넘기기만 하면 된다.</p>
<p>사실 이렇게 말로만 들으면 Promise에 대한 감이 전혀 오질 않을수도 있다.</p>
<p>일단 만들어 보자.</p>
<hr>
<h1 id="Promise-만들고-실행하기"><a href="#Promise-만들고-실행하기" class="headerlink" title="Promise 만들고 실행하기"></a>Promise 만들고 실행하기</h1><p>setTimeout을 이용하여 10초 이하 카운팅하는 Promise를 만들어보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countdown</span>(<span class="params">seconds</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> timeoutIds = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = seconds; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">      timeoutIds.push(setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">10</span>) &#123;</span><br><span class="line">          timeoutIds.forEach(clearTimeout);   <span class="comment">// 등록된 setTimeout 스케쥴을 다 지워버린다.</span></span><br><span class="line">          <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"10초를 초과하는 수는 셀수 없다. 입력받은 초:"</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i&gt;<span class="number">0</span>) <span class="built_in">console</span>.log(i + <span class="string">'...'</span>);</span><br><span class="line">        <span class="keyword">else</span> resolve(<span class="built_in">console</span>.log(<span class="string">"GO!"</span>));</span><br><span class="line">      &#125;, (seconds-i)*<span class="number">1000</span>));</span><br><span class="line">    &#125; <span class="comment">//-for</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>비동기적 동작을 원하는 내용을 콜백으로 new Promise의 인자로 넘긴다.</p>
<p>중요한 문법적 요소는 Promise의 인자로 넘겨지는 콜백함수의 매개변수 resolve(성공), reject(실패)이다.</p>
<p>resolve(성공)는 Promise에 인자인 콜백이 정상동작을 했을 경우 동작할 로직이고, reject(실패)는 그 반대로 콜백이 실패한경우 동작할 로직이다.</p>
<p>즉 resolve, reject도 콜백이다.</p>
<p><strong>그리고 resolve, reject의 중요한 특징은 여러번 호출하든, 섞어서 호출하든 첫번째로 호출한 것만 의미가 있다는 것이다.</strong></p>
<p>자 그러면 이제 반환된 Promise를 호출하는 부분이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">countdown(<span class="number">13</span>).then(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 정상 종료"</span>); <span class="comment">// resolve 호출시 동작</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 동작 에러:"</span>+ err.message); <span class="comment">// reject 호출시 동작</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>then의 첫번째 인자가 resolve, 두번째 인자가 reject를 대체하는 것을 알수 있다.</p>
<p><strong>Promise의 인자콜백에서 로직상으로 reject는 없을수 있지만, 반드시 성공했을 경우 resolve를 명시적으로 호출해 줘야 한다.</strong></p>
<p>그래야만 Promise에서 호출하는 부분에서 정상적으로 동작했는지 여부를 확인 할 수 있다.</p>
<p>아래처럼  resolve, reject를 둘로 나눠서 사용할 수도 있다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = countdown(<span class="number">13</span>);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 정상 종료"</span>); <span class="comment">// resolve 호출시 동작</span></span><br><span class="line">&#125;);</span><br><span class="line">p.catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 동작 에러:"</span>+ err.message); <span class="comment">// reject 호출시 동작</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>또는 아래처럼 더 간단하게도 사용이 가능하다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p = countdown(<span class="number">13</span>);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 정상 종료"</span>); <span class="comment">// resolve 호출시 동작</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"countdown 동작 에러:"</span>+ err.message); <span class="comment">// reject 호출시 동작</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Promise를 실행하는 방법중 위 방법을 가장 추천한다.</p>
<p>그 이유는 <strong>then의 콜백에서 발생하는 error도 맨 마지막 catch에서 처리할 수 있기 때문이다.</strong></p>
<p>그리고 콜백헬을 대체 할 Promise체인을 사용하기 편하다.</p>
<hr>
<h1 id="Promise-Chain-프라미스-체인"><a href="#Promise-Chain-프라미스-체인" class="headerlink" title="Promise Chain(프라미스 체인)"></a>Promise Chain(프라미스 체인)</h1><p>프라미스가 완료되면 그 다음단계 진행해야할 로직들을 묶어서 순차적으로 실행할수 있다.</p>
<p>이 체인기능은 callback hell 이라는 문제점을 해결해준다.</p>
<p>예를 들어 a.txt, b.txt, c.txt 파일을 순서대로 읽어야 한다고 가정하자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//파일을 읽는 Promise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">fileName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    fs.readFile(fileName, <span class="string">"utf-8"</span> ,<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="keyword">return</span> reject(err);</span><br><span class="line">      resolve(<span class="built_in">console</span>.log(data));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//파일을 읽는 Promise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFileBBBBB</span>(<span class="params">fileName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    fs.readFile(fileName, <span class="string">"utf-8"</span> ,<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="keyword">return</span> reject(err);</span><br><span class="line">      resolve(<span class="built_in">console</span>.log(data));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = readFile(<span class="string">"a.txt"</span>);</span><br><span class="line"></span><br><span class="line">p.then(readFileBBBBB(<span class="string">"b.txt"</span>))</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//Promise 채인에 일반 콜백 연결</span></span><br><span class="line">  fs.readFile(<span class="string">"c.txt"</span>, <span class="string">"utf-8"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span> <span class="built_in">console</span>.error(<span class="string">"c.txt 파일 읽기 실패"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">"에렁:"</span> + err.message);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/images/20181112-javascript-promise_1.png" alt="위 코드 결과"></p>
<p>위 코드는 많은 것을 보여주고 있다.</p>
<ul>
<li><p>최초 호출된 Promise를 통해서 비동기적으로 동작하는 로직을 순서대로 묶을수 있다.</p>
</li>
<li><p>최초 호출을 제외하고 그 다음 단계부터 Promise와 콜벡을 혼용해서 순서를 만들수 있다.</p>
</li>
<li><p>Promise체인 어디에서든 에러가 생기면 체인 전체가 멈추고 그 에러 처리를 마지막의 catch 핸들러 한 곳에서 처리 할 수 있다.</p>
</li>
<li><p>callback hell의 중첩으로 쌓인 코드보다 훨씬 보기가 쉽다.</p>
</li>
</ul>
<p>프로미스 체인기능은 아주 직관적이고 강력한 기능이라 생각된다.</p>
<p><strong>위 예제에는 없지만 resolve의 매개인자를 통해서 앞선 단계의 데이터를 다음단계로 계속 넘길수도 있다.</strong></p>
<h1 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h1><p>일단 여기까지만… 이게 공부해보니 상당히 어려운 javascript 문법기술이다.<br>결정되지 않는 프라미스 방지나, 프라미스 체인에서 재귀적으로 promise를 호출했을 경우등…. 아직 공부해야 할 부분이 많아 보인다.<br>이 글에서는 promise의 개념과 간단한 사용법 정도만 보고 넘어가야 겠다.</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/08/docker-20181108-docker-nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/08/docker-20181108-docker-nginx/" class="post-title-link" itemprop="url">docker - Nginx에 webserver연동하기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-08 06:47:34" itemprop="dateCreated datePublished" datetime="2018-11-08T06:47:34+09:00">2018-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>개인용 포트폴리오 웹을 어떻게 서비스할까 고민하던중 docker를 문뜩 docker를 이용해보고 싶어졌다.<br>이글은 Windows환경에서 Docker for Windows를 통해서 nginx 이미지를 이용하여 로컬에 있는 webserver 를 실행예제이다.</p>
<h1 id="nginx-이미지-다운받기"><a href="#nginx-이미지-다운받기" class="headerlink" title="nginx 이미지 다운받기"></a>nginx 이미지 다운받기</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure>

<p>위 명령어를 이용해서 docker hub에서 nginx 공식 이미지를 다운 받는다.</p>
<h1 id="nginx-웹서버에-올릴-웹-폴더-준비"><a href="#nginx-웹서버에-올릴-웹-폴더-준비" class="headerlink" title="nginx 웹서버에 올릴 웹 폴더 준비"></a>nginx 웹서버에 올릴 웹 폴더 준비</h1><p><img src="/images/20181108-docker-nginx_1.png" alt="준비된 웹폴더"></p>
<p>나는 위처럼 nginx에 실행할 웹 폴더를 준비했다.<br>만약 따라하는 사람이 있다면 그냥 특정폴더에 index.html 파일만 있어도 된다.</p>
<h1 id="nginx-컨테이너를-실행하면서-웹폴더-연동하기"><a href="#nginx-컨테이너를-실행하면서-웹폴더-연동하기" class="headerlink" title="nginx 컨테이너를 실행하면서 웹폴더 연동하기"></a>nginx 컨테이너를 실행하면서 웹폴더 연동하기</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx-mokafolio -v /C/Users/amagr/Desktop/projects/mokafolio:/usr/share/nginx/html:ro -d -p 58080:80 -p 443:443 nginx</span><br></pre></td></tr></table></figure>

<p>위 명령어는 nginx이미지를 컨테이너로 만들고 프로세스를 실행하는 명령어이다.<br>명령어를 쪼개어 설명해보겠다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run</span><br></pre></td></tr></table></figure>

<p>docker 이미지를 컨테이너로 만들고 실행한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--name nginx-mokafolio</span><br></pre></td></tr></table></figure>

<p>생성하는 컨테이너의 이름을 nginx-mokafolio라고 명명한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-v /C/Users/amagr/Desktop/projects/mokafolio:/usr/share/nginx/html:ro</span><br></pre></td></tr></table></figure>

<p>위 설정은 실행할 컨테이너의 볼륨(volume)을 연결하는 것이다.<br>즉, 로컬의 /C/Users/amagr/Desktop/projects/mokafolio 경로를 실행할 컨테이너의 /usr/share/nginx/html로 연결한다.</p>
<p>내 경우 윈도우 경로가 C:\Users\amagr\Desktop\projects\mokafolio 이지만 /C/Users/amagr/Desktop/projects/mokafolio 식으로 변경해야 한다.</p>
<p>-d 옵션은 컨테이너를 데몬(백그라운드)로 실행하겠다는 말이다.<br>-p 58080:80 -p 443:443의 의미는 로컬의 58080포트를 컨테이너의 80포트로 연결하고, 로컬의 443포트를 컨테이너의 443포트에 연결한다.</p>
<p>명령어 마지막의 nignx는 docker run이 실행할 이미지의 이름이다.</p>
<p>대충 명령어 설명은 끝냈다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p>위 명령어로 재대로 컨테이너가 동작하는지 확인해 보자.</p>
<p><img src="/images/20181108-docker-nginx_2.png" alt="docker ps로 현재 실행중인 컨테이너 확인결과."></p>
<p>브라우저에서 localhost:58080으로 접근해서 nginx가 잘 동작되는지 확인해보자.</p>
<p><img src="/images/20181108-docker-nginx_3.png" alt="docker nginx 웹서버 동작 확인."></p>
<p>잘 동작하는 것을 확인했다.</p>
<p>사실 실제 docker를 사용할때에는 ningx와 웹서버 폴더를 하나의 이미지로 묶어서 하나의 새로운 이미지로 만들어 사용한다고 하는데…</p>
<p>그건 나중에 좀더 공부해 봐야 겠다.</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/08/javascript-20181108-javascript-callback-hell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/08/javascript-20181108-javascript-callback-hell/" class="post-title-link" itemprop="url">javascript - callback hell(콜백 헬)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-08 06:06:41" itemprop="dateCreated datePublished" datetime="2018-11-08T06:06:41+09:00">2018-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="콜벡헬이란"><a href="#콜벡헬이란" class="headerlink" title="콜벡헬이란"></a>콜벡헬이란</h1><p>콜백을 사용해 비동기적으로 실행할 수 있긴 하지만, 현실적인 단점이 있다.<br>한 번에 여러 가지를 기다려야 한다면 콜백을 관리하기가 상당히 어려워진다.<br>노드 앱을 만든다고 하자.<br>이 앱은 세 가지 파일의 콘텐츠를 읽고, 60초가 지난 다음 이들을 결합해 네번째 파일에 기록 한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'a.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, dataA</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="built_in">console</span>.error(err);</span><br><span class="line">  fs.readFile(<span class="string">'b.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, dataB</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="built_in">console</span>.error(err);</span><br><span class="line">    fs.readFile(<span class="string">'c.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, dataC</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="built_in">console</span>.error(err);</span><br><span class="line">      setTimetout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        fs.writeFile(<span class="string">'d.txt'</span>, dataA+dataB+dataC, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(err) <span class="built_in">console</span>.error(err);</span><br><span class="line">        &#125;, <span class="number">60</span> * <span class="number">100</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>위 코드를 손으로 직접 타이핑 해보길 바란다.<br>콜벡이 여러개 겹쳐 있지만 콜백 자체 코드는 굉장히 심플하다.<br>하지만 뻥 안치고 괄호랑 중괄호 재대로 짝이 맞는지 확인을 수도없이 하게 된다.</p>
<p>위와 같은 코드를 콜백 헬이라고 부른다.</p>
<p><strong>콜백헬의 가장큰 문제는 위처럼 콜백이 중첩될 경우 코드 자체를 알아보기 어렵다는 것이다.</strong><br><strong>더 골치 아픈 문제는 콜벡에서의 에러 처리이다.</strong></p>
<p>위 예제에서는 에러를 기록하기만 했지만, 예외를 일으키려 했다면 더더욱 골치가 아파진다.</p>
<h1 id="콜벡헬에서의-예외발생"><a href="#콜벡헬에서의-예외발생" class="headerlink" title="콜벡헬에서의 예외발생"></a>콜벡헬에서의 예외발생</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readSketchyFile</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    fs.readFile(<span class="string">'dose_not_exist.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'warning : minor issue occurred, program continuing'</span>);</span><br><span class="line">  &#125; <span class="comment">// _try</span></span><br><span class="line">&#125; <span class="comment">// _fs</span></span><br><span class="line"></span><br><span class="line">readSketchyFile();</span><br></pre></td></tr></table></figure>

<p>이 코드는 얼핏 타당해 보이고, 예외 처리도 수행하는 방어적인 코드처럼 보인다.<br>동작하지 않는다는 것만 빼면 말이다.<br>직접 실행해 보면, 예상되는 에러가 문제를 일으키기 않도록 대비 했는데도 프로그램은 멈춘다.<br><strong>예외 처리가 의도대로 동작하지 않는 이유는 try …catch 블록은 같은 함수 안에서만 동작하기 때문이다.</strong><br>try …catch 블록은 readSketchyFile 함수 안에 있지만, 정작 예외는 fs.readFile이 콜백으로 호출하는 익명 함수 안에서 일어난다.</p>
<p>또한, 콜백이 우연히 두번 호출되거나, 아예 호출되지 않는 경우를 방지하는 안전장치도 없다.<br>콜백이 정확히 한 번만 호출될 것을 가정하고 코드를 작성한다면, 애석하지만 자바스크립트는 그런 걸 보장하지 앟는다.</p>
<h1 id="콜백헬의대안"><a href="#콜백헬의대안" class="headerlink" title="콜백헬의대안"></a>콜백헬의대안</h1><p>대표적으로 async라이브러리, Promise 등이으로 콜벡헬의 문제점을 해결할 수 있다.<br>async라이브러리를 사용하기 보다는 callback의 발전된 형태인 Promise를 사용하는 것이 더 좋아보인다.<br>요즘에는 Promise보다 더 강력한 async …await라는 것도 있다.</p>
<p>음 프로미스는 다음글에…</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/08/java-20181108-java7-switch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/08/java-20181108-java7-switch/" class="post-title-link" itemprop="url">java7에서 switch 문법의 변화</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-08 01:35:12" itemprop="dateCreated datePublished" datetime="2018-11-08T01:35:12+09:00">2018-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>java6 까지는 switch 문의 괄호에는 정수타입(byte, char, short, int, long) 변수나 정수값을 산출하는 연산식만 올 수 있었다.<br><strong>java7 부터는 String 타입의 변수도 올수 있다.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String userAutority = <span class="string">"root"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span>(userAutority)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"root"</span>:</span><br><span class="line">    System.out.println(<span class="string">"관리자 권한입니다."</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"guest"</span>:</span><br><span class="line">    System.out.println(<span class="string">"손님 권한입니다."</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    System.out.println(<span class="string">"권한을 확인할 수 없습니다."</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2018/11/08/node-20181108-node-path-join-vs-resolve/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/08/node-20181108-node-path-join-vs-resolve/" class="post-title-link" itemprop="url">Node path.join() vs path.resolve()</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2018-11-08 00:23:48" itemprop="dateCreated datePublished" datetime="2018-11-08T00:23:48+09:00">2018-11-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>
            </span>

          

        </div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 20200427hexo_post_head -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="4907587145" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>Vue나 Webpack등을 보면 Node의 Path모듈을 자주 사용하는 것을 볼수 있다.</p>
<p>이 Path 모듈은 Node의 내장모듈로서 javascript에서 폴더나 파일의 경로를 쉽게 문자열로 만들어주는 유틸리티 모듈이다.</p>
<p>특히 Windows 타입과 POSIX(Linux, macOS)타입으로 경로구분자가 다른수 있는데, 이 Path 모듈을 사용하면 여기에 대한 고민을 할 필요가 없어진다.</p>
<p>Path 모듈에는 다양한 메소드가 있으나, 보통 인자로 path를 받고 메소드별로 적절하게 문자열 형태의 path를 리턴하는 형태이다.</p>
<p>이 글에서는 Node의 path패키지 메서드중  여러개의 경로를 인자로 받아 하나의 경로로 합쳐주는 join과 resolve에 대해 정리해 보겠다.</p>
<h1 id="Path-join"><a href="#Path-join" class="headerlink" title="Path.join()"></a>Path.join()</h1><p>메소드명처럼 인자로 받은 경로들을 하나로 합쳐서 문자열 형태로 path를 리턴한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">'/foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz/asdf'</span>, <span class="string">'quux'</span>, <span class="string">'..'</span>);</span><br><span class="line"><span class="comment">// Returns: '/foo/bar/baz/asdf'</span></span><br><span class="line"></span><br><span class="line">path.join(<span class="string">'foo'</span>, &#123;&#125;, <span class="string">'bar'</span>);</span><br><span class="line"><span class="comment">// throws 'TypeError: Path must be a string. Received &#123;&#125;'</span></span><br></pre></td></tr></table></figure>

<p>재미있는 점은 첫 번째 예제의 맨 마지막 인자이다. </p>
<p><strong>..</strong> 은 현재경로에서 한단계 위의 상위경로를 의미한다.</p>
<p>따라서 <strong>/foo/bar/baz/asdf/quux</strong> 이 상태의 경로에서 마지막에 합쳐진 <strong>..</strong> 로 인해 quux의 한 단계 위 경로로 이동하게 되어 quux가 결과값에 제외된 것이다.</p>
<p>즉, <strong>..</strong> 의 왼쪽에 있는 한 개의 경로인자는 제외된다.</p>
<h1 id="Path-resolve"><a href="#Path-resolve" class="headerlink" title="Path.resolve()"></a>Path.resolve()</h1><p>resolve도 join과 마찬가지로 인자로 받은 경로들을 하나로 합쳐러 문자열 헝태로 리턴한다.</p>
<p>하지만 다른점은 전달받은 경로인자들의 <strong>맨 오른쪽 부터 왼쪽으로 경로인자들을 합쳐</strong>나간다는 것이다.</p>
<p>그리고 경로인자들을 합쳐나가는중 <strong>/</strong> 를 만나면 절대경로로 인식해서 나머지 경로 인자들을 무시한다.</p>
<p>만약 <strong>/</strong> 를 끝까지 만나지 못하면 <strong>/현재경로/생성된경로</strong> 형태로 결과를 리턴한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">path.resolve(<span class="string">'/foo/bar'</span>, <span class="string">'./baz'</span>);</span><br><span class="line"><span class="comment">// Returns: '/foo/bar/baz'</span></span><br><span class="line"></span><br><span class="line">path.resolve(<span class="string">'/foo/bar'</span>, <span class="string">'/tmp/file/'</span>);</span><br><span class="line"><span class="comment">// Returns: '/tmp/file'</span></span><br><span class="line"></span><br><span class="line">path.resolve(<span class="string">'wwwroot'</span>, <span class="string">'static_files/png/'</span>, <span class="string">'../gif/image.gif'</span>);</span><br><span class="line"><span class="comment">// if the current working directory is /home/myself/node,</span></span><br><span class="line"><span class="comment">// this returns '/home/myself/node/wwwroot/static_files/gif/image.gif'</span></span><br></pre></td></tr></table></figure>

<p>여기서도 <strong>..</strong> 의 왼쪽에 있는 한 개의 경로인자는 제외된다.<br>이 특성은 Path 모듈의 메소드 전반에 적용되는 룰인것 같다.</p>
<h1 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h1><p><a href="https://nodejs.org/api/path.html" target="_blank" rel="external nofollow noopener noreferrer">https://nodejs.org/api/path.html</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="이전 페이지"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="다음 페이지"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hanumoka</p>
  <div class="site-description" itemprop="description">아마추어 개발자의 블로그</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">566</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hanumoka" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hanumoka" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:amagramer@gmail.com" title="E-Mail → mailto:amagramer@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    <div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 왼쪽 사이드 광고 -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="9032012837" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    </div>
    
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hanumoka</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
