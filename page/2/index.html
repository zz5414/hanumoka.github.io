<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://www.hanumoka.net').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

<!-- 구글 애드센스 코드  -->
<script data-ad-client="ca-pub-6388187282606796" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100596920-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-100596920-1');
</script>
 
<!-- 네이버 웹 마스터-->
<meta name="naver-site-verification" content="74bc91ee61c53c02f7d87ab3a442f99823f4f5f9">
  <meta name="description" content="아마추어 개발자의 블로그">
<meta property="og:type" content="website">
<meta property="og:title" content="Hanumoka, IT Blog">
<meta property="og:url" content="https://www.hanumoka.net/page/2/index.html">
<meta property="og:site_name" content="Hanumoka, IT Blog">
<meta property="og:description" content="아마추어 개발자의 블로그">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="Hanumoka">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.hanumoka.net/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Hanumoka, IT Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Hanumoka, IT Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hanumoka, IT Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">그래봐야 코딩, 그래도 코딩</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>홈</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>태그</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>카테고리</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>아카이브</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-fw fa-calendar"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>Sitemap</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/atom.xml" rel="section"><i class="fa fa-fw fa-rss"></i>rss</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-fw fa-heartbeat"></i>Commonweal 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/hanumoka" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/12/25/elasticsearch-20191225-Elasticsearch-hello-Elasticsearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/25/elasticsearch-20191225-Elasticsearch-hello-Elasticsearch/" class="post-title-link" itemprop="url">Elasticsearch-hello-Elasticsearch</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-12-25 17:53:26" itemprop="dateCreated datePublished" datetime="2019-12-25T17:53:26+09:00">2019-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Elasticsearch/" itemprop="url" rel="index">
                    <span itemprop="name">Elasticsearch</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="엘라스틱서치-입문과-활용"><a href="#엘라스틱서치-입문과-활용" class="headerlink" title="엘라스틱서치 입문과 활용"></a>엘라스틱서치 입문과 활용</h1><h2 id="1-엘라스틱-서치-개요"><a href="#1-엘라스틱-서치-개요" class="headerlink" title="1.엘라스틱 서치 개요"></a>1.엘라스틱 서치 개요</h2><h3 id="1-1-엘라스틱-서치란"><a href="#1-1-엘라스틱-서치란" class="headerlink" title="1-1.엘라스틱 서치란"></a>1-1.엘라스틱 서치란</h3><p>우리는 지금 정보의 홍수 속에 살고 있다. 매일 매초 인터넷에 연결된 수없이 많은 시스템으로부터 헤아릴 수 없을 만큼 많은 데이터가 쏟아져 나오고 있으며, 이 데이터로부터 의미 있고 가치 있는 정보를 뽑아내기 위한 시스템 또한 수도 없이 개발되고 있다. </p>
<p>특히 SNS와 각종 포털 사이트에서 사용자의 활동 정보 등에 대한 대용량 데이터의 실시간 분석 기술은 <strong>빅데이터</strong>라는 이름의 트렌드로 자리 잡으며 수많은 업체와 정부 기관에 데이터 활용의 새 지평을 열었다.</p>
<p>이와 같은 정보의 홍수속에서 필요로 하는 정확한 데이터를 검색하여 찾는 기술은 무엇보다 중요해 졌다. 데이터를 검색하는데 있어 전 세계적으로 가장 널리 사용되고 있는 기술중 하나가 바로 아파치 루씬(Apache Lucene)이다. </p>
<p>자바로 개발된 루씬은 오픈소스로 현재 아파치 Top 레벨 프로젝트로 등록돼 있다.</p>
<p>루씬은 강력한 검색 기능이 있지만, 완전한 솔루션이 아닌 라이브러리로 제공되기 대문에 개인이나 기업에서 실제로 사용혀려면 루씬 라이브러리를 이용해 검색 솔루션을 스스로 개발해야 한다.</p>
<p>아파치 루씬 라이브러리를 실무에 사용하기 위해 티카(Tica), 솔라(Solr)등의 솔루션이 개발되어 있는데 가장 <strong>최근에 개발돼 선풍적인 인기를 끌고 있는 솔루션이 바로 엘라스틱 서치이다.</strong></p>
<p>엘라스틱서치는 샤이 배논(Shay Bannon)이 개발했으며 현재 오픈소스 프로젝트로 진행되고 있다. </p>
<p>엘라스틱 서치를 이용하여 분산환경에서의 병렬 처리와 실시간 검색을 지원하고, 확장성이 뛰어난 대규모 시스템을 쉽게 구축할 수 있다.</p>
<p><strong>엘라스틱 서치를 요약하자면, 빅데이터(비정형데이터)로부터 원하는 데이터를 검색하기 위한 검색엔진 솔루션이라고 할수 있다.</strong></p>
<h3 id="1-2-용어-정리를-통한-엘라스틱서치의-이해"><a href="#1-2-용어-정리를-통한-엘라스틱서치의-이해" class="headerlink" title="1-2. 용어 정리를 통한 엘라스틱서치의 이해"></a>1-2. 용어 정리를 통한 엘라스틱서치의 이해</h3><p>네이버나 구글에서 제공하는 다양한 서비스는 일상에서 빼놓을 수 없는 서비스로 자리매김했다.</p>
<p>그중에서도 사용자가 원하는 검색어에 대한 결과를 제공하는 검색 서비스가 가장 많이 사용되고 있다.</p>
<p>그리고 이러한 검색 서비스를 부르는 용어도 다양하다.</p>
<p><strong>검색엔진</strong>, <strong>검색시스템</strong>, <strong>검색서비스</strong> 등의 용어가 대표적인데 무언가 비슷하면서도 다른 듯한 알쏭달쏭한 느낌이 든다. </p>
<p>먼저 <strong>검색엔진(Search engine)</strong>은 광활한 데이터에서 원하는 검색결과는 제공하는 프로그램이다.</p>
<p>검색엔진은 검색 결과로 제공되는 데이터의 특성에 따라 구현 형태가 각각 달라진다.</p>
<p>검색 역사에 한 획을 그은 야후(Yahoo)는 디렉터리 기반의 검색 결과를 세계 최초로 제공했다.</p>
<p>이를 바탕으로 요즘에는 뉴스, 블로그, 카페 등 대범주에 따른 카테고리별 검색결과를 대부분의 검색 업체에서 제공하고 있다.</p>
<p><strong>검색 시스템(Search system)</strong>은 대용량 데이터를 기반으로 신뢰성 있는 검색 결과를 제공하기 위해 검색엔진을 기반으로 구축된 시스템을 통칭하는 용어다.</p>
<p>수집기를 이용해 방대한 데이터를 수집하고 이를 다수의 검색엔진을 이용해 색인하고 검색결과를 UI로 제공한다. </p>
<p>시스템 내부의 정책에 따라 관련도가 다수 높은 문서를 검색 결과의 상위에 배치할 수 있을뿐더러 특정 필드나 문서에 가중치를 둬서 검색의 정확도를 높일 수도 있다.</p>
<p><strong>검색 서비스(search service)</strong>는 검색엔진을 기반으로 구축한 검색 시스템을 활용해 검색 결과를 서비스로 제공한다.</p>
<p>엄밀히 말하자면 <strong>엘라스틱서치는 검색엔진</strong>으로 분류 할 수 있다.</p>
<p>그리고 <strong>ELK스택을 활용하여 검색엔진보다 더 큰 검색시스템</strong>을 구성 할수 있다.</p>
<pre><code>검색 서비스(ex:google, naver ) &gt; 검색 시스템(ex: ELK스택) &gt; 검색엔진(ex: 엘라스틱 서치)</code></pre><h3 id="1-3-검색-시스템의-구성-요소"><a href="#1-3-검색-시스템의-구성-요소" class="headerlink" title="1-3. 검색 시스템의 구성 요소"></a>1-3. 검색 시스템의 구성 요소</h3><p>이번에는 검색시스템의 구성요소를 통해 엘라스틱서치를 알아보자.</p>
<p>검색 시스템의 기본 구조는 개발사에 따라 서로 조금씩 다르지만 기본 구조는 같다. </p>
<p>일반적으로 정보를 수집하는 수집기, 수집한 데이터를 저장하는 스토리지, 수집한 데이터를 검색에 적절한 형태로 변환하는 색인기, 색인된 데이터에서 일치하는 문서를 찾는 검색기로 구성된다.</p>
<p><strong>수집기</strong></p>
<p>수집기는 웹사이트, 블로그, 카페 등 웹에서 필요한 정보를 수집하는 프로그램이다.</p>
<p>크롤러(Crawler), 스파이더(Spider), 웜(Worms), 웹 로봇(Web Robot) 등으로도 불린다.</p>
<p>파일, 데이터베이스, 웹페이지 등 웹상의 대부분의 정보가 수집대상이다.</p>
<p>파일의 경우 수집기가 파일명, 파일 내용, 파일 경로 등의 정보를 수집하고 저장하면 검색엔진이 저장된 정보를 검색하고, 사용자 질의에 답한다.</p>
<p><strong>스토리지</strong></p>
<p>데이터베이스에서 데이터를 저장하는 물리적인 저장소다. 검색엔진은 색인한 데이터를 스토리지에 보관한다.</p>
<p><strong>색인기</strong></p>
<p>검색엔진이 수집한 정보에서 사용자 질의와 일치하는 정보를 찾으려면 수집된 데이터를 검색 가능한 구조로 가공하고 저장해야 한다.</p>
<p>그 역할을 하는 것이 색인기다.</p>
<p>색인기는 다양한 형태로 분석을 조합해 정보에서 의미가 있는 용어를 추출하고 검색에 유리한 역색인 구조로 데이터를 저장한다.</p>
<p><strong>검색기</strong></p>
<p>검색기는 사용자 질의를 입력받아 색인기에서 저장한 역색인 구조에서 일치하는 문서를 찾아 결과로 반환한다.</p>
<p>질의와 문서가 일치하는지 유사도 기반의 검색 순위 알고리즘으로 판단한다.</p>
<p>검색기 또한 색인기와 마찬가지로 현태로 분석기를 이용해 사용자 질의에서 유의미한 용어를 추출해 검색한다.</p>
<p>따라서 사용하는 형태로 분석기에 따라 검색 품질이 달라진다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/1.png" alt="Hello%20ElasticSearch/1.png"></p>
<p>엘라스틱서치는 위 검색시스템 구성요소 중 색인기, 스토리지, 검색기를 포함하고 있다.</p>
<h3 id="1-4-관계형-데이터베이스와-엘라스틱서치의-차이점"><a href="#1-4-관계형-데이터베이스와-엘라스틱서치의-차이점" class="headerlink" title="1-4. 관계형 데이터베이스와 엘라스틱서치의 차이점"></a>1-4. 관계형 데이터베이스와 엘라스틱서치의 차이점</h3><p>검색엔진을 설명할 때 항상 비교되는 것이 관계형 데이터베이스(RDMBS)다.</p>
<p>두 가지 모두 질의와 일치하는 데이터를 찾아 사용자에게 제공한다는 점에서 유사점이 많이 때문이다.</p>
<p>하지만 관계형 데이터베이스로 검색 기능을 제공하는 데는 많은 문제점이 있다.</p>
<p>관계형 데이터베이스의 어떠한 한계 때문에 검색엔진이 등장하게 됐는지, 그리고 이 둘은 어떤 점에서 차이점이 있는지 살펴보자.</p>
<p>데이터베이스는 데이터를 통합 관리하는 데이터의 집합이다. 저장방식에 따라 크게 관계형 또는 계층형 데이터베이스로 나뉜다.</p>
<p>모든 데이터는 중복을 제거하고 정형 데이터로 구조화해 행과 열로 구성된 테이블에 저장된다.</p>
<p>SQL문을 이용해 원하는 정보의 검색이 가능한데 텍스트 매칭을 통한 단순한 검색만 가능하다.</p>
<p>텍스트를 여러 단어로 변형하거나 여러 개의 동의어나 유의어를 활용한 검색은 불가능하다.</p>
<p>반면 검색엔진은 데이터베이스에서 불가능한 비정형 데이터를 색인하고 검색할 수 있다.</p>
<p>형태소 분석을 통해 사람이 구사하는 자연어의 처리가 가능해지고 역색인 구조를 바탕으로 빠른 검색 속도를 보장한다.</p>
<p><strong>엘라스틱서치와 관계평 데이터베이스 비교</strong></p>
<table>
<thead>
<tr>
<th align="left">엘라스틱서치</th>
<th align="left">관계형 데이터베이스</th>
</tr>
</thead>
<tbody><tr>
<td align="left">인덱스(Index)</td>
<td align="left">데이터베이스(Database)</td>
</tr>
<tr>
<td align="left">샤드(Shard</td>
<td align="left">파티션(Partition)</td>
</tr>
<tr>
<td align="left">타입(Type)</td>
<td align="left">테이블(Table)</td>
</tr>
<tr>
<td align="left">문서(Document)</td>
<td align="left">행(Row)</td>
</tr>
<tr>
<td align="left">필드(Field)</td>
<td align="left">열(Column)</td>
</tr>
<tr>
<td align="left">매핑(Mapping)</td>
<td align="left">스키마(Schema)</td>
</tr>
<tr>
<td align="left">Query DSL</td>
<td align="left">SQL</td>
</tr>
</tbody></table>
<p>위 표는 검색엔진의 대표 자자격인 엘라스틱서치와 관계형 데이터베이스의 주요 개념을 비교해 보여준다.</p>
<p>엘라스틱서치의 인덱스는 관계형 데이터베이스의 데이터베이스와 비슷한 문서의 모음을 뜻한다.</p>
<p>엘라스틱서치의 타입은 데이터베이스의 테이블과 같은 역을 한다. </p>
<p>6.0 이하 버전에서는 하나의 인덱스 내부에 기능에 따라 데이터를 분류하고 여러 개의 타입을 만들어 사용했지만 현재(7버전)는 하나의 인덱스에 하나의 타입만을 구성하도록 바뀌었다.</p>
<p>엘라스틱서치는 하나의 행을 문서라고 부르며, 해당 문서는 데이터베이스 테이블의 한 행을 의미한다.</p>
<p>또한 엘라스틱서치의 매핑은 필드의 구조와 제약조건에 대한 명세를 말하며 이에 대응하는 관계형 데이터베이스의 개념을 스키마라 한다.</p>
<p>관계형 데이터베이스와 엘라스틱서치는 인덱스라는 개념을 다르게 사용한다.</p>
<p>엘라스틱서치의 인덱스는 Database, 앞에 설명했지만 관계형 데이터베이스에서의 인데스는 WHERE 절의 쿼리와 JOIN을 빠르게 만드는 보조 데이터 도구로 사용된다.</p>
<p>엘라스틱서치와 데이터베이스는 데이터의 추가, 수정, 삭제 방식에도 차이가 있다. </p>
<p>엘라스틱서치는 기본적으로 HTTP를 통해 JSON 형식의 RESTful API를 이용한다.</p>
<p>엘라스틱서치는 자바로 개발 됐지만 여러 가지 프로그래밍 언어를 통해 사용할 수도 있다.</p>
<p><strong>Copy of 추가, 검색, 삭제, 수정 기능 비교</strong></p>
<table>
<thead>
<tr>
<th align="left">엘라스틱서치에서 사용하는 HTTP 메소드</th>
<th align="left">기능</th>
<th align="left">데이터베이스 질의 문법</th>
</tr>
</thead>
<tbody><tr>
<td align="left">GET</td>
<td align="left">데이터조회</td>
<td align="left">SELECT</td>
</tr>
<tr>
<td align="left">PUT</td>
<td align="left">데이터생성</td>
<td align="left">INSERT</td>
</tr>
<tr>
<td align="left">POST</td>
<td align="left">인덱스 업데이트, 데이터조회</td>
<td align="left">UPDATE, SELECT</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="left">데이터삭제</td>
<td align="left">DELETE</td>
</tr>
<tr>
<td align="left">HEAD</td>
<td align="left">인덱스정보확인</td>
<td align="left">-</td>
</tr>
</tbody></table>
<h3 id="1-5-엘라스틱서치의-특징"><a href="#1-5-엘라스틱서치의-특징" class="headerlink" title="1-5. 엘라스틱서치의 특징"></a>1-5. 엘라스틱서치의 특징</h3><p>요즘에는 대량의 데이터를 빠르게 검색하기 위해 NoSQL(No Structured Query Language)를 많이 사용한다.</p>
<p>엘라스틱서치 NoSQL의 일종으로서 분류가 가능하고 부산 처리를 통해 실시간에 준하는 빠른 검색이 가능하다.</p>
<p>기존 데이터베이스로는 처리하기 어려운 대량의 비정형 데이터도 검색할 수 있으며, 전문검색(Full Text)과 구조 검색 모두를 지원한다. </p>
<p>기본적으로는 검색엔진이지만 MongoDB나 Hbase처럼 대용량 스토리지로도 활용할 수 있다.</p>
<h3 id="1-5-1-엘라스틱서치의-강점"><a href="#1-5-1-엘라스틱서치의-강점" class="headerlink" title="1-5-1. 엘라스틱서치의 강점"></a>1-5-1. 엘라스틱서치의 강점</h3><p><strong>오픈소스 검색엔진</strong></p>
<p>엘라스틱서치는 아파치 재단의 루씬(Lucene)을 기반으로 개발된 오픈소스 검색엔진이다.</p>
<p>따라서 전 세계에서 수많은 사람들이 사용하고 있으며, 버그가 발생할 경우에도 대부분 빠르게 해결된다.</p>
<p>현재 약 2억 5천만 번 이상 다운로드됐는데, 이 수치만 보더라도 얼마나 많은 사람들이 사용하고 있는지 알 수 있다.</p>
<p>다운로드가 많이 일어난다는 것은 프로젝트가 많이 활성화돼 있다는 것을 의미한다.</p>
<p><strong>전문검색</strong></p>
<p>PostgreSQL, MongoDB 같은 대부분의 데이터베이스는 기본 쿼리 및 색인 구조의 한계로 인해 기본적인 텍스트 검색 기능만 제공한다.</p>
<p>하지만 엘라스틱서치는 좀 더 고차원적인 전문검색(Full Text)이 가능하다.</p>
<p>전문검색이란 내용 전체를 색인해서 특정 단어가 포함된 문서를 검색하는 것을 말한다.</p>
<p>기존 관계형 데이터베이스는 전문 검색에 적합하지 않지만 엘라스틱서치는 다양한 기능별, 언어별 플러그인을 조합해 빠르게 검색할 수 있다.</p>
<p><strong>통계분석</strong></p>
<p>비정형 로그 데이터를 수집하고 한곳에 모아 통계 분석을 할 수 있다.</p>
<p>엘라스틱서치와 키바나(Kibana)를 연결하면 실시간으로 쌓이는 로그를 시각화하고 분석할 수 있다.</p>
<p><strong>스키마리스(Schemaless)</strong></p>
<p>데이터베이스는 스키마라는 구조에 따라 데이터를 적합한 형태로 변경해서 저장하고 관리한다.</p>
<p>반면 엘라스틱서치는 정형화되지 않은 다양한 형태의 문서도 자동으로 색인하고 검색할 수 있다.</p>
<p><strong>RESTful API</strong></p>
<p>엘라스틱서치는 HTTP 기반의 RESTful API를 지원하고 요청뿐 아니라 응답에도 JSON 형식을 사용해 개발 언어, 운영체제, 시스템에 관계없이 이기종 플랫폼에서도 이용 가능하다.</p>
<p><strong>멀티테넌시(Multi-tenancy)</strong></p>
<p>서로 상이한 인덱스일지라도 검색할 필드명만 같으면 여러 개의 인덱스를 한번에 조회할 수 있다.</p>
<p>이를 이용해 멀티테넌시 기능을 제공할 수 있다.</p>
<p><strong>Document-Oriented</strong></p>
<p>여러 계층의 데이터를 JSON 형식의 구조화된 문서로 인덱스에 저장할 수 있다.</p>
<p>계층 구조로 문서도 한번의 쿼리로 쉽게 조회할 수 있다.</p>
<p><strong>역색인(Inverted Index)</strong></p>
<p>앞서 언급했듯이 엘라스틱서치는 루씬 기반의 검색엔진이다. 따라서 엘라스틱서치 또한 역색인을 지원한다.</p>
<p>반면 MongoDB, 카산드라(Cassandra)같은 일반적인 NoSQL은 역색인을 지원하지 않는다.</p>
<p>이는 다른 NoSQL 대비 엘라스틱서치의 매우 큰 장점이라 할 수 있다. </p>
<p><img src="/images/2019/Hello%20ElasticSearch/KakaoTalk_20191204_215703353.png" alt="Hello%20ElasticSearch/KakaoTalk_20191204_215703353.png"></p>
<p>색인:책의 목차와 같다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/KakaoTalk_20191204_215708663.png" alt="Hello%20ElasticSearch/KakaoTalk_20191204_215708663.png"></p>
<p>역색인:책의 뒷부분에 중요한 키워드로 페이지를 찾을수 있다.</p>
<p><strong>확장성과 가용성</strong></p>
<p>10억 개의 문서를 색인한다고 가정해보자. 모든 문서를 색인하는 데 막대한 비용과 시간이 드는 것은 불보듯 뻔하나.</p>
<p>하지만 엘라스틱서치를 분산 구성해서 확장한다면 대량의 문서를 좀 더 효율적으로 처리할 수 있다.</p>
<p>분산 환경에서 데이터는 샤드(Shard)라는 작은 단위로 나뉘어 제공되며, 인덱스를 만들 때마다 샤드의 수를 조절할 수 있다.</p>
<p>이를 통해 데이터의 종류와 성격에 따라 데이터를 분선해서 빠르게 처리할 수 있다.</p>
<h3 id="1-5-2-엘라스틱서치의-약점"><a href="#1-5-2-엘라스틱서치의-약점" class="headerlink" title="1-5-2. 엘라스틱서치의 약점"></a>1-5-2. 엘라스틱서치의 약점</h3><p>마법주문처럼 보이는 엘라스틱서치도 약점이 있다.</p>
<p>첫째, <strong>실시간</strong>이 아니다. 일반적으로 색인된 데이터는 통상적으로 1초 뒤에나 검색이 가능해진다.</p>
<p>색인된 데이터는 내부적으로 커밋(Commit)과 플러쉬(Flush)같은 복잡한 과정을 거치기 때문에 실시간이 아니다.</p>
<p>엄밀히 따지자면 준 실시간(Near Realtime)이라고 할 수 있다.</p>
<p>둘째, 트랜잭션과 롤백 기능을 제공하지 않는다. 엘라스틱서치는 기본적으로 분산 시스템으로 구성된다. 전체적인 클러스터의 성능 향상을 위해 시스템적 비용 소모가 큰 롤백(Rollback)과 트랜젝션(Transaction)을 지원하지 않기 때문에 최악의 경우 데이터 손실의 위험이 있다.</p>
<p>셋째, 데이터의 업데이트를 제공하지 않는다. 엄밀히 말하자면 엘라스틱서치는 업데이트 명령이 요청될 경우 기존 문서를 삭제하고 변경된 내용으로 새로운 문서를 생성하는 방식을 사용한다.</p>
<p>이러한 이유로 단순 업데이트에 비해서는 상대적으로 많은 비용이 발생한다.</p>
<p>하지만 이것은 큰 단점은 아니다. 이를 통해 불변적(Immutable)이라는 이점을 취할 수 있기 때문이다.</p>
<h3 id="1-6-엘라스틱서치-사용사례"><a href="#1-6-엘라스틱서치-사용사례" class="headerlink" title="1-6.엘라스틱서치 사용사례"></a>1-6.엘라스틱서치 사용사례</h3><ul>
<li>위키피디아(Wikipedia)는 엘라스틱서치를 이용해 전문검색(Full Text Search)를 수행하고 실시간 타이핑 검색, 추천검색어 기능등에 활용 중이다.</li>
<li>더 가디언(The Guardian)지는 방문객의 로그 분석을 통한 소셜 데이터를 생성해 실시간 응대와 기사에 대한 반응 분석등에 엘라스틱서치를 사용하고 있다.</li>
<li>스택오버플로어(StackOverflow)에서는 검색 내용과 결과를 통합해 유사한 질문과 해답을 연결하는 데 엘라스틱서치를 활용하고 있다.</li>
<li>깃허브(Github)에서는 1,300억 줄이 넘는 소스코드를 검색하는 데 엘라스틱서치를 사용중이다.</li>
<li>골드만 삭스(Goldman Sachs)에서는 매일 5TB가 넘는 데이터를 저장하고 있으며, 엘라스틱서치를 이용해 이 데이터를 주식 시장의 변동을 분석하는데 사용한다.</li>
</ul>
<h2 id="2-엘라스틱서치-검색원리-분석과-역색인"><a href="#2-엘라스틱서치-검색원리-분석과-역색인" class="headerlink" title="2.엘라스틱서치 검색원리(분석과 역색인)"></a>2.엘라스틱서치 검색원리(분석과 역색인)</h2><p>엘라스틱서치에서 입력된 데이터를 통해 검색어를 추출하기 위한 프로세스를 거치는데 이 과정을 분석(Analysis)이라고 한다. </p>
<p>이때 분석 과정에서 사용하는 프로그램을 분석기-애널라이저(Analyzer)라고 하며 분석기는 하나의 토크나이저(Tokenizer)와 0개 또는 1개 이상의 토큰필터(Token Filter)로 구성돼 있다.</p>
<p>토크나이저는 입력 데이터를 토크나이저에 설정된 기준에 따라 검색어 토큰으로 분리하는 작업을 한다.</p>
<p>토큰 필터는 토크나이저로 분리된 토큰들에 다시 필터를 적용해서 실제로 검색에 쓰이는 검색어들로 최종 변환하는 작업을 한다.</p>
<p>엘라스틱 서치에서는 내부적으로 다양한 분석기를 가지고 있으며, 자신만의 분석기를 생성해서 적용할 수도 있다.</p>
<h3 id="2-1-분석과정"><a href="#2-1-분석과정" class="headerlink" title="2-1. 분석과정"></a>2-1. 분석과정</h3><p>엘라스틱서치에서 데이터를 색인할 때 문사가 분석되는 가정을 한번 살펴보자.</p>
<p>데이터는 색인될 때 인덱스에 설정된 분석기의 종류에 따라 토크나이저 → 토큰필터 순으로 분석과정을 거친다.</p>
<p>예제로 문자열 “Around the World in Eighty Days”에 whitespace 토크나이저와 lowercase그리고 stop 토큰필터를 적용시켜 가면서 분석 과정을 차례대로 확인해보자.</p>
<p>먼저 이 문자열에 whitespace 토크나이저를 적용시켜서 분석을 진행하면 문자열이 다음과 같이 분리된다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/1-Page-2_(1).png" alt="Hello%20ElasticSearch/1-Page-2_(1).png"></p>
<p>whitespace 토크나이저는 공백 또는 줄바꿈을 기준으로 단어를 불리하는 토크나이저다.</p>
<p>위에서 처럼 withespace토크나이저를 거친 문자열 “Around the Wrold in Eighty Days”는 각 Around, the, World, in, Eighty, Days라는 검색어 토큰으로 색인된다.</p>
<p>이제 이 검색어 토큰에 lowercase 토큰필터를 적용하면 각 검색어 토큰은 다음과 같이 변경된다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/1-Page-3.png" alt="Hello%20ElasticSearch/1-Page-3.png"></p>
<p>lowercase 토큰필터를 거친 검색어 토큰은 모두 소문자로변환된다. lowercase 토큰필터를 거친 검색어 토큰에 마지막으로 stop 토큰필터를 한번 더 적용하면 검색어 토큰은 다음과 같이 된다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/1-Page-4_(1).png" alt="Hello%20ElasticSearch/1-Page-4_(1).png"></p>
<p>stop 토큰필터는 검색어 토큰 중 불용어(stopwords)에 해당하는 토큰을 검색어 토큰 목록에서 제외시키는 역할을 한다.</p>
<p>일반적으로 영어 단어 중 the, end, is와 같이 거의 대부분의 문장에 빠지지 않고 들어있는 대명사 또는 전치사 등의 단어를 실제로 검색어로 사용하기에는 문제가 있기 때문에 이러한 단어는 불용어에 해당된다. </p>
<p>위 내용을 실제 엘라스틱서치에 _analyze API를 통해 확인해 볼 수 있다.</p>
<p>아래는 whitespace 토크나이저만 적용하여 “Around the Wrold in Eighty Days” 텍스트의 분석을 요청하는 화면이다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled.png" alt="Hello%20ElasticSearch/Untitled.png"></p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%201.png" alt="Hello%20ElasticSearch/Untitled%201.png"></p>
<p>위처럼 공백 단위로 잘려진 토큰을 확인 할 수 있다.</p>
<p>filter로 lowercase를 적용한 결과 아래처럼 분석된 토큰들이 소문자로 변환된 것을 확인 할 수 있다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%202.png" alt="Hello%20ElasticSearch/Untitled%202.png"></p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%203.png" alt="Hello%20ElasticSearch/Untitled%203.png"></p>
<p>이제 여기서 추가로 stop 토큰필터를 적용해보자. </p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%204.png" alt="Hello%20ElasticSearch/Untitled%204.png"></p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%205.png" alt="Hello%20ElasticSearch/Untitled%205.png"></p>
<p>the, in 이 삭제된 것을 확인할 수 있다.</p>
<p>분석기(Analyzer)는 데이터의 분석에 사용할 토크나이저와 토큰 필터를 저장하고 있는 일종의 배치 프로그램으로 이해할 수 있다. </p>
<p>엘라스틱서치에서 기본적으로 제공하는 분석기 역시 모두 토크나이저와 토큰필터를 가지고 있으며, 이 외에 추가로 사용자가 임의의 토크나이저와 토큰필터를 선택해서 사용자 정의 분석기를 생성할 수 있다.</p>
<p>사용자 정의 분석기는 인덱스 단위로저장되며 해당 인덱스에 데이터 색인할 때 분석기를 명시해서 사용할 수 있다.</p>
<p>다음은 실제 인덱스를 생성하면서 분석기를 설정하는 화면이다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%206.png" alt="Hello%20ElasticSearch/Untitled%206.png"></p>
<p>inca_index라는 인덱스를 생성하며 settings에 분석기를 설정했다.</p>
<p>아래는 맵핑정보로서 RDB의 테이블 정의라고 생각하면 된다. title이라는 프로퍼티에 위에서 생성한 my_analyzer를 설정했다.</p>
<p>인덱스를 생성한뒤 해당 인덱스에 아래처럼 데이터를 입력하게 되면, title이라는 프로퍼티는 자동으로 index생성시 설정한 my_analyzer를 통해 역색인 과정을 거쳐 해당 역색인 데이터를 엘라스틱서치 내부에 따로 저장하게 된다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%207.png" alt="Hello%20ElasticSearch/Untitled%207.png"></p>
<p><img src="/images/2019/Hello%20ElasticSearch/1-Page-5.png" alt="Hello%20ElasticSearch/1-Page-5.png"></p>
<h2 id="3-엘라스틱-서치의-활용예시"><a href="#3-엘라스틱-서치의-활용예시" class="headerlink" title="3.엘라스틱 서치의 활용예시"></a>3.엘라스틱 서치의 활용예시</h2><h3 id="3-1-ELK-스택"><a href="#3-1-ELK-스택" class="headerlink" title="3-1. ELK 스택"></a>3-1. ELK 스택</h3><p>엘라스틱서치는 뛰어난 검색엔진이지만 실무에서 사용하려면 입력할 데이터를 JSON형태로 가공 해야 하고, 검색된 데이터를 시각화하려면 별도의 차트 프로그램이나 라이브러리를 사용해야 하는등 부가적인 작업을 거쳐야 한다.</p>
<p>이를 위해 엘라스틱서치에서는 데이터 입력을 다양한 방식으로 간편하게 할 수 있는 프로그램인 로그스태시(Logstash)와 검색 데이터를 편리하게 시각화할 수 있는 도구인 키바나(Kibana)를 홈페이지에서 함께 제공하고 있다.</p>
<p>엘라스틱서치(Elasticsearch), 로그스테이시(Logstash), 키바나(Kibana)를 연동해서 구성한 시스템을 ELK 스택(ELK Stack)이라 한다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%208.png" alt="Hello%20ElasticSearch/Untitled%208.png"></p>
<p>ELK 스택와 더불어 ELK 스택에 경량 데이터수집 플랫폼인 Beats를 통해 다양한 환경에서 다양한 데이터를 수집, 가공, 저장, 시각화 하는 구조를 구성할 수 있다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/beats-platform.png" alt="Hello%20ElasticSearch/beats-platform.png"></p>
<h3 id="3-2-한글-형태소-분석기"><a href="#3-2-한글-형태소-분석기" class="headerlink" title="3-2. 한글 형태소 분석기"></a>3-2. 한글 형태소 분석기</h3><p>엘라스틱서치에서는 여러종류의 분석기와 토크나이저, 토큰필터를 내장하고 있다.</p>
<p>하지만 영어가 아닌 우리말(한글)로 된 문장을 분석하려면 내장된 분석기로 만족할 만한 결과를 얻기가 쉽지 않다.</p>
<p>예를 들어 “동해물과 백두산이 마르고 닳도록”과 같은 문장을 분석하면 보통은 “동해물과”, “백두산이”와 같이 공백 정도로만 토큰을 구분하거나 CJK 알고리즘을 사용한 경우에도 “동해”, “해물”과 같이 2음절의 토큰을 생성하는 정도로만 분석된다. </p>
<p>이 문장에서 “동해”, “백두산” 같은 검색어 토큰을 분석하려면 한글을 의미로 해석해서 분리할 수 있는 별도의 한글 형태소 분석기가 필요하다.</p>
<p>엘라스틱서치나 아파치 루씬에서는 한글을 위한 별도의 분석기 또는 사전을 제공하지 않고 있다.</p>
<p>하지만 정확한 한글 분석을 위해 국내 개발자들에 의해 별도로 개발되어 있는 한글 형태소 분석기들이 있다.</p>
<p>잘 알려진 분석기로는 아리랑 한글 분석기 프로젝트, 은전한잎 한글 분석기 프로젝트 등이 있으며 대부분 오픈소스로 개발되고 있으므로 해당 프로젝트 페이지에서 소스코드와 다양한 정보를 구할 수 있다.</p>
<p><img src="/images/2019/Hello%20ElasticSearch/Untitled%209.png" alt="Hello%20ElasticSearch/Untitled%209.png"></p>
<h1 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h1><p>시작하세요! 엘라스틱서치(책)</p>
<p>엘라스틱서치 실무 가이드(책)</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/12/19/hexo-20191219-hello-hexo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/19/hexo-20191219-hello-hexo/" class="post-title-link" itemprop="url">Hexo 블로그 만들기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-12-19 22:32:38" itemprop="dateCreated datePublished" datetime="2019-12-19T22:32:38+09:00">2019-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>hexo는 jekyll과 같은 정적 블로그 생성 프레임 워크이다. </p>
<p>다만 hexo는 루비가 아닌 javascript, node등을 기반으로한 정적 블로그 생성기이다.</p>
<p>hexo도 markdown으로 글을 작성하며, github page와 연동해서 로컬에서 생성한 hexo 블로그를 웹에 공개 할수도 있다.</p>
<p>hexo의 자세한 설명은 아래 공식 페이지에서 확인 할 수 있다.</p>
<p><a href="https://hexo.io/ko/index.html" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a></p>
<p>Hexo 블로그를 만들기 전에, 로컬에 미리 node가 설치 되어 있어야 한다.</p>
<p>설치가 되어있지 않다면, 구글링해서 설치하길 바란다.</p>
<p><img src="/images/Hexo20191219/Untitled.png" alt="/images/Hexo20191219/Untitled.png"></p>
<p>블로그를 생성한 경로로 이동해서 터미널을 열고 아래 명령어를 순차적으로 입력하면된다.</p>
<pre><code>npm install hexo-cli -g    #hexo cli를 글로벌로 설치
hexo init hexoblog         #hexoblog라는 폴더로 hexo 블로그 생성     
cd blog                    #생성된 폴더로 진입
npm install                #의존성 설치
hexo server                #hexo 블로그 기동</code></pre><p>아래 hexo init명령으로 hexoblog라는 hexo blog 폴더를 생성한다.</p>
<p>요즘에는 자동으로 기본 디펜던시를 다운로드 해주는것 같다.</p>
<p><img src="/images/Hexo20191219/Untitled%201.png" alt="/images/Hexo20191219/Untitled%201.png"></p>
<p>아래처럼 폴더가 생성 된다.</p>
<p><img src="/images/Hexo20191219/Untitled%202.png" alt="/images/Hexo20191219/Untitled%202.png"></p>
<p><img src="/images/Hexo20191219/Untitled%203.png" alt="/images/Hexo20191219/Untitled%203.png"></p>
<p>위 이미지에서 hexo-deployer-git 을 추가로 설치했다. </p>
<p>해당 모듈은 나중에 gitpage에 hexo로 빌드한 정적 웹을 배포하는 용도의 모듈이다.</p>
<p>마지막으로 hexo s 또는 hexo server 를 입력하면 hexo가 동작중이라는 문구와 url 이 나온다.</p>
<p><img src="/images/Hexo20191219/Untitled%204.png" alt="/images/Hexo20191219/Untitled%204.png"></p>
<p>브라우저로 hexo 블로그가 동작하는 것을 확인 할 수 있다.</p>
<p>아래 블로그의 테마는 hexo의 기본 테마인 landscape 테마이다. </p>
<p>다음글에서는 이 테마를 Next 테마로 변경하는 내용을 다뤄 보도록 하겠다.</p>
<p><img src="/images/Hexo20191219/Untitled%205.png" alt="/images/Hexo20191219/Untitled%205.png"></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/26/react-20191026-react-modal-draggable/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/26/react-20191026-react-modal-draggable/" class="post-title-link" itemprop="url">react 드래그 modal 예제</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-26 02:11:18" itemprop="dateCreated datePublished" datetime="2019-10-26T02:11:18+09:00">2019-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>windows에서 create-react-app으로 예제 프로젝트를 준비했다.</p>
<p><img src="/images/2019/Untitled-15d005bb-ceac-4a63-8045-4b64d65db61a.png" alt></p>
<p><a href="https://reactstrap.github.io/" target="_blank" rel="external nofollow noopener noreferrer">https://reactstrap.github.io/</a></p>
<p>react에서 bootstrap을 컴포넌트를 제공하는 라이브러리가 있다. reactstrap이라는 라이브러리이다.</p>
<p>설치하자. 이 라이브러리에 있는 모달을 사용할 예정이다.</p>
<pre><code>npm install --save reactstrap react react-dom</code></pre><p><a href="https://www.npmjs.com/package/react-draggable" target="_blank" rel="external nofollow noopener noreferrer">https://www.npmjs.com/package/react-draggable</a></p>
<p>react에서 마우스 드래그 기능을 제공하는 라이브러리이다 설치하자.</p>
<p>해당 라이브러리는 modal에만 해당하는것이 아니라 감싼 컴포넌트 모두를 지원한다.</p>
<pre><code>npm install react-draggable</code></pre><p><img src="/images/2019/Untitled-f41dddcb-82d9-4253-a436-bd45624d6924.png" alt></p>
<p>ModalExample.js 라는 파일을 만들자. 이 파일이 마우스 드래그가 가능한 모달 컴포넌트이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line">    <span class="keyword">import</span> &#123; Button, Modal, ModalHeader, ModalBody, ModalFooter &#125; <span class="keyword">from</span> <span class="string">'reactstrap'</span>;</span><br><span class="line">    <span class="keyword">import</span> Draggable <span class="keyword">from</span> <span class="string">'react-draggable'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ModalExample</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">      <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">          modal: <span class="literal">false</span></span><br><span class="line">        &#125;;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">this</span>.toggle = <span class="keyword">this</span>.toggle.bind(<span class="keyword">this</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    </span><br><span class="line">      toggle() &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">          modal: !prevState.modal</span><br><span class="line">        &#125;));</span><br><span class="line">      &#125;</span><br><span class="line">    </span><br><span class="line">      render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;Button color=<span class="string">"danger"</span> onClick=&#123;<span class="keyword">this</span>.toggle&#125;&gt;&#123;<span class="keyword">this</span>.props.buttonLabel&#125;&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;Draggable</span></span><br><span class="line"><span class="regexp">            axis="both"</span></span><br><span class="line"><span class="regexp">            handle=".handle"</span></span><br><span class="line"><span class="regexp">            defaultPosition=&#123;&#123;x: 0, y: 0&#125;&#125;</span></span><br><span class="line"><span class="regexp">            position=&#123;null&#125;</span></span><br><span class="line"><span class="regexp">            grid=&#123;[25, 25]&#125;</span></span><br><span class="line"><span class="regexp">            scale=&#123;1&#125;</span></span><br><span class="line"><span class="regexp">            onStart=&#123;this.handleStart&#125;</span></span><br><span class="line"><span class="regexp">            onDrag=&#123;this.handleDrag&#125;</span></span><br><span class="line"><span class="regexp">            onStop=&#123;this.handleStop&#125;&gt;</span></span><br><span class="line"><span class="regexp">            &lt;Modal isOpen=&#123;this.state.modal&#125; toggle=&#123;this.toggle&#125; className=&#123;this.props.className&#125;&gt;</span></span><br><span class="line"><span class="regexp">              &lt;ModalHeader toggle=&#123;this.toggle&#125; className="handle"&gt;Modal title&lt;/</span>ModalHeader&gt;</span><br><span class="line">              &lt;ModalBody&gt;</span><br><span class="line">                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed <span class="keyword">do</span> eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor <span class="keyword">in</span> reprehenderit <span class="keyword">in</span> voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt <span class="keyword">in</span> culpa qui officia deserunt mollit anim id est laborum.</span><br><span class="line">              &lt;<span class="regexp">/ModalBody&gt;</span></span><br><span class="line"><span class="regexp">              &lt;ModalFooter&gt;</span></span><br><span class="line"><span class="regexp">                &lt;Button color="primary" onClick=&#123;this.toggle&#125;&gt;Do Something&lt;/</span>Button&gt;&#123;<span class="string">' '</span>&#125;</span><br><span class="line">                &lt;Button color=<span class="string">"secondary"</span> onClick=&#123;<span class="keyword">this</span>.toggle&#125;&gt;Cancel&lt;<span class="regexp">/Button&gt;</span></span><br><span class="line"><span class="regexp">              &lt;/</span>ModalFooter&gt;</span><br><span class="line">            &lt;<span class="regexp">/Modal&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>Draggable&gt;</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        );</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">    export default ModalExample;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">App.js</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    import React from 'react';</span></span><br><span class="line"><span class="regexp">    import './</span>App.css<span class="string">';</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    import ModalExample from '</span>./ModalExample<span class="string">';</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    function App() &#123;</span></span><br><span class="line"><span class="string">      return (</span></span><br><span class="line"><span class="string">        &lt;div className="App"&gt;</span></span><br><span class="line"><span class="string">          &lt;ModalExample buttonLabel=&#123;"모달 테스트"&#125;&gt;&lt;/ModalExample&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    export default App;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-aad57dc8-6977-4dd3-a7aa-2f429b61b1c3.png" alt></p>
<p>npm run start 로 실행해보자.</p>
<p>모달창을 열고 모달의 제목을 마우스로 드래그 하면 드래그가 가능한 것을 확인 할 수 있다.</p>
<p><img src="/images/2019/Untitled-17358c2c-8fd5-4fab-8949-e21e5cd6f3d3.png" alt></p>
<p>현재 드래그가 좀 버벅이는 것 처럼 보이는데, 그것은 react-draggable의 옵션으로 부드러움 정도를 설정 할수 있다.</p>
<p>해당 예제는 아래 github에 올려놓았다.</p>
<p><a href="https://github.com/hanumoka/react-modal-draggable.git" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/hanumoka/react-modal-draggable.git</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/23/jenkins-20191023-jenkins-connect-gitlab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/23/jenkins-20191023-jenkins-connect-gitlab/" class="post-title-link" itemprop="url">jenkins에서 Gitlab연동하기(Gitlab계정사용)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-23 21:33:41" itemprop="dateCreated datePublished" datetime="2019-10-23T21:33:41+09:00">2019-10-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/jenkins/" itemprop="url" rel="index">
                    <span itemprop="name">jenkins</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>이번은 로컬에 docker로 올린 jenkins를 사용해서 Gitlab(online)에 연동하는 방법을 알아보겠다.</p>
<h1 id="실습전-준비"><a href="#실습전-준비" class="headerlink" title="실습전 준비"></a>실습전 준비</h1><p><img src="/images/2019/Untitled-096ae800-7d1d-4496-8d86-6fb46e597b19.png" alt></p>
<p>위 처럼 gitlab에 테스트할 리파지토리를 하나 준비했다.</p>
<p><img src="/images/2019/Untitled-4bb0ed17-41b4-4ad9-8477-5299bfb6a62d.png" alt></p>
<p>위처럼 젠킨스에서는 Git plugin, GitLab Plugin을 설치해주자. </p>
<p>Git plugin은 기본적으로 설치되어 있지만, GitLab Plugin은 추가로 설치해 주어야 할 것이다.</p>
<p> Git, GitLab관련 다양한 기능을 제공하는 플러그인들이 추가로 있으니, 필요기능별로 찾아 사용하면 된다.</p>
<h1 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h1><p>구글링 해보면, Gitlab에 accesstoken을 사용해서 jenkins와 연동하는 예제는 많이 있다.</p>
<p>하지만 내가 셋팅한 jenkins에 뭔가 문제가 있는지, Gitlab accesstoken을 저장까지는 되지만 막상 Project에서 Gitlab accesstoken credential을 불러오지 못했다.</p>
<p>따라서 차선책으로 Gitlab의 accesstoken대신 Gitlab의 계정을 사용하여, jenkins에 연동을 해볼것이다.</p>
<h2 id="jenkins에-github-계정-Credential-추가하기"><a href="#jenkins에-github-계정-Credential-추가하기" class="headerlink" title="jenkins에 github 계정 Credential 추가하기"></a>jenkins에 github 계정 Credential 추가하기</h2><p>jenkins에서 Credentilas로 이동 → global 클릭</p>
<p><img src="/images/2019/Untitled-60c9c996-c12a-40b7-a0da-2c7d61c7c349.png" alt></p>
<p>Add Credentials클릭</p>
<p><img src="/images/2019/Untitled-f458cdc9-43bb-4559-a605-f5eb08806eef.png" alt></p>
<p>이 화면에서 Credential을 저장하고 젠킨스의 project에서 필요한 Credential을 불러와서 사용한다.</p>
<p><strong>Username</strong>에 gitlab 계정아이디(필수 값)</p>
<p><strong>Password</strong>에 gitlba 계정비밀번호(필수 값)</p>
<p><strong>ID</strong>에는 Credential을 식별하는 아이디(필수 값)</p>
<p>Description은 이 Credential에 대한 설명을 입력하자.</p>
<p><img src="/images/2019/Untitled-cf60f55a-733d-4979-9b43-8f6a9f0f5179.png" alt></p>
<p>Credential저장이 완료되었다면, 이제 새로운 Item을 생성하자.</p>
<p><img src="/images/2019/Untitled-201c3e62-c6e8-4914-b966-c6004c565ccd.png" alt></p>
<p>아이템 이름을 입력하고, Freestyle project 를 선택하고 OK 를 클릭하자.</p>
<p><img src="/images/2019/Untitled-6ca71e3a-fad5-43b6-81af-d11977a20d70.png" alt></p>
<p>GitLab의 특정 프로젝트로 가서 리파지토리 URL을 클립보드로 복사하자.</p>
<p><img src="/images/2019/Untitled-24719915-f835-4208-9f20-58f5872ca493.png" alt></p>
<p>다시 jenkins로 이동해서 </p>
<p>앞서 생성한 Item의 소스코드 관리로 이동후 Git 선택.</p>
<p>그리고 Repository URL에 앞서 복사한 Gitlab 프로젝트 URL을 붙여넣자.</p>
<p>처음에는 Credential이 none이므로 아래처럼 빨란 경고문그로 접근할수 없다고 나온다.</p>
<p><img src="/images/2019/Untitled-f513ed0a-8af3-4c70-9a4a-5a776329c08a.png" alt></p>
<p>Credentials 셀렉트박스를 눌러서 앞서 입력한, Credential을 선택하자.</p>
<p>아래 그림에서는 내가 테스트로 여러개를 입력해서 여러개가 나오는 것 뿐이다.</p>
<p><img src="/images/2019/Untitled-1bfdbbcf-fdb0-4f60-b0ba-464af4f44477.png" alt></p>
<p>선택한 뒤 조금 지나면, 아래처럼 빨간 문구가 사라진 것을 확인 할 수 있다. 이것으로 연동이 된 것이다.</p>
<p><img src="/images/2019/Untitled-2119f085-d987-4604-beda-d8cb62d481ea.png" alt></p>
<p>실제 연동이 됬는지 확인하기 위해 item에 build로 가서 Execute shell을 클릭한뒤 ls -al 명령어를 입력하자.</p>
<p><img src="/images/2019/Untitled-08e205a1-9276-4284-9753-f59c156d6f25.png" alt></p>
<p>아래처럼 ls -al을 입력해서 gitlab 리파지토리에서 소스를 받아오는지 출력해보자.</p>
<p>저장을 눌러서 jenkins item을 저장하자.</p>
<p><img src="/images/2019/Untitled-7374ca61-189c-482b-bb09-22f7d63c89b0.png" alt></p>
<p>아래처럼 저장이 완료 되었다.</p>
<p><img src="/images/2019/Untitled-eefc218c-fab5-40f1-a68a-993609dca21d.png" alt></p>
<p>Build Now를 눌러서 Jenkins item을 동작 시키자.</p>
<p>아래처럼 Build History가 성공적으로 끝났다.</p>
<p>#1을 클릭해서 내용을 확인해 보자.</p>
<p><img src="/images/2019/Untitled-b8b35e7c-5086-4e7a-8c3c-4aead8967509.png" alt></p>
<p><img src="/images/2019/Untitled-97cd9b10-17d9-46bb-9ca0-fb4599284651.png" alt></p>
<p>아래처럼 gitlab의 소스를 받아오는 것을 확인 할 수 있다.</p>
<p><img src="/images/2019/Untitled-add45bd0-65e5-4a3e-b566-7319aa1c740b.png" alt></p>
<p>끝!!!</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/14/docker-20191014-docker-jenkins-docker-in-docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/14/docker-20191014-docker-jenkins-docker-in-docker/" class="post-title-link" itemprop="url">Docker를 이용한 Jenkins 컨테이너 만들기(docker in docker)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-14 22:01:11" itemprop="dateCreated datePublished" datetime="2019-10-14T22:01:11+09:00">2019-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Docker를-이용한-Jenkins-컨테이너-만들기-docker-in-docker"><a href="#Docker를-이용한-Jenkins-컨테이너-만들기-docker-in-docker" class="headerlink" title="Docker를 이용한 Jenkins 컨테이너 만들기(docker in docker)"></a>Docker를 이용한 Jenkins 컨테이너 만들기(docker in docker)</h1><p>Created: Oct 14, 2019 8:41 PM</p>
<h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>이번에는 ubuntu 18.04 가상머신에 docker, docker-compose 를 사용해서 jenkins 컨테이너를 생성해보겠다.</p>
<p>도커 관리를 위해서 Dockerfile, docker-compose 모두 사용할 예정이다.</p>
<p>이번에 만들 jenkins 컨테이너는 내부에서 dockerfile을 빌드할 예정이므로, docker in docker로 jenkins 이미지를 만들 예정이다.</p>
<h1 id="1-Docker관리를-위한-폴더와-파일-구조"><a href="#1-Docker관리를-위한-폴더와-파일-구조" class="headerlink" title="1. Docker관리를 위한 폴더와 파일 구조"></a>1. Docker관리를 위한 폴더와 파일 구조</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker (도커 관리 폴더)</span><br><span class="line">|-- jenkins_with_docker (도커를 포함한 젠킨슨 관리 폴더)</span><br><span class="line">  |-- jenkins_home      (젠킨스 컨테이너의 볼륨 연결용 폴더, 빈 폴더 준비)</span><br><span class="line">  |-- docker-compose.yml  (실제 컨테이너를 생성하는 docker-compose 파일)</span><br><span class="line">  |-- Dockerfile         (docker-compose.yml에서 빌드할 jenkins 파일)</span><br><span class="line">  |-- docker_install.sh   (Dockerfile에서 호출할 docker 설치 스크립트 파일)</span><br></pre></td></tr></table></figure>
<p><img src="/images/2019/Untitled-102a40b7-b19d-441e-8e97-83b6d54175af.png" alt></p>
<p>구조는 아래와 같다.</p>
<p><img src="/images/2019/Untitled-d23756fa-1243-4ad0-94b0-bdf22ea4d2c1.png" alt></p>
<p>이미 스스로가 docker 컨테이너는 jenkins에서 docker를 사용하기 위해서는 컨테이너가 동작하는 호스트의 docker를 빌려서 사용하는 것이다.</p>
<p><strong>연결 방법은 docker volume을 사용해서 docker 가 설치된 host의 /var/run/docker.sock과 jenkins 컨테이너 내부의 /var/run/docker.sock를 연결해 줘야 한다.</strong></p>
<p>이 부분은 docker-compose.yml 에 설정 할 것이다.</p>
<h1 id="2-설정-파일들-준비"><a href="#2-설정-파일들-준비" class="headerlink" title="2. 설정 파일들 준비"></a>2. 설정 파일들 준비</h1><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">FROM jenkins&#x2F;jenkins:lts</span><br><span class="line"></span><br><span class="line">USER root </span><br><span class="line"></span><br><span class="line">COPY docker_install.sh &#x2F;docker_install.sh</span><br><span class="line"></span><br><span class="line">RUN chmod +x &#x2F;docker_install.sh</span><br><span class="line"></span><br><span class="line">RUN &#x2F;docker_install.sh</span><br></pre></td></tr></table></figure>
<p>jenkins이미지에 docker_install.sh 파일을 복사해서 가져와서 실행한다.</p>
<p>Dockerfile 내부에서 RUN 명령등으로 쉘 스크립트를 실행할수 있지만, 뭔가 계속 오류가 나서 이런 방식을 선택했다.</p>
<h2 id="docker-install-sh"><a href="#docker-install-sh" class="headerlink" title="docker_install.sh"></a>docker_install.sh</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">apt-get update &amp;&amp; \</span><br><span class="line">apt-get -y install apt-transport-https \</span><br><span class="line">     ca-certificates \</span><br><span class="line">     curl \</span><br><span class="line">     gnupg2 \</span><br><span class="line">     zip \</span><br><span class="line">     unzip \</span><br><span class="line">     software-properties-common &amp;&amp; \</span><br><span class="line">curl -fsSL https://download.docker.com/linux/$(. /etc/os-release; <span class="built_in">echo</span> <span class="string">"<span class="variable">$ID</span>"</span>)/gpg &gt; /tmp/dkey; apt-key add /tmp/dkey &amp;&amp; \</span><br><span class="line">add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/<span class="variable">$(. /etc/os-release; echo "$ID")</span> \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span> &amp;&amp; \</span><br><span class="line">apt-get update &amp;&amp; \</span><br><span class="line">apt-get -y install docker-ce</span><br></pre></td></tr></table></figure>
<p>위 내용은 jenkins Dockerfile을 빌드할때 동작하는 스크립트이다.</p>
<p>내용은 jenkins 내부에 docker를 설치하는 것이다.</p>
<p>개인적으로 이렇게 sh파일을 copy하는게 편해보인다. </p>
<p>구글링으로 얻을수 있는 쉘스크립트를 바로 쓸수 있기 때문이다.</p>
<p>만약 jdk, maven, gradle, node등 필요한게 있다면 이런식으로 추가해 주면 될것 같다.</p>
<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">jenkins:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">'jenkins_docker'</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'8200:8080'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'50200:50000'</span></span><br><span class="line">    <span class="attr">expose:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'8080'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'50000'</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'./jenkins_home:/var/jenkins_home'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">'/var/run/docker.sock:/var/run/docker.sock'</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">TZ:</span> <span class="string">"Asia/Seoul"</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">default:</span></span><br><span class="line">    <span class="attr">external:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">devops</span></span><br></pre></td></tr></table></figure>
<p>docker-compose.yml에서는 이미지 대신 Dockerfile을 이용해서 이미지를 대신한다.</p>
<p>volumes에서 docker.sock을 host와 연결한다.</p>
<h1 id="3-컨테이너-생성"><a href="#3-컨테이너-생성" class="headerlink" title="3. 컨테이너 생성"></a>3. 컨테이너 생성</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker network create devops</span><br></pre></td></tr></table></figure>
<p>혹시나 나중에 쓸지도 모를 네트워크를 일단 생성하자.</p>
<p><img src="/images/2019/Untitled-cb93506f-1cc9-474d-912b-645e8c7f40da.png" alt></p>
<p>그리고 docker-copomse.yml 이 있는 경로로 이동해서 아래 명령으로 이미지 생성과 jenkins 컨테이너를 생성하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>
<p>위 명령얼 실행하면 Dockerfile을 빌드하기 시작한다. 이때 jenkins 이미지를 받고 docker를 설치하므로 시간이 좀 걸린다.</p>
<p>그리고 완료가 되면 아래처럼 나올것이다.</p>
<p><img src="/images/2019/Untitled-265f282f-40f3-41eb-9938-db3a84dae26f.png" alt></p>
<p>그리고 docker 이미지를 검색해보면 아래처럼 상당이 큰 이미지가 생성된다.</p>
<p><img src="/images/2019/Untitled-f334ccd5-368f-42bc-b2c8-386ea71250b9.png" alt></p>
<p>만약 위 과정에서 문제가 생긴다면, Dockerfile을 별도로 빌드해서 Dockerfile에서 오류가 나는지, docker_install.sh에서 오류가 나는지, 아니면 docker-compose.yml 에서 오류가나는지 찬찬히 찾아봐야 한다.</p>
<h1 id="4-jenkins-컨테이너에-접속해서-docker-명령어-테스트"><a href="#4-jenkins-컨테이너에-접속해서-docker-명령어-테스트" class="headerlink" title="4. jenkins 컨테이너에 접속해서 docker 명령어 테스트"></a>4. jenkins 컨테이너에 접속해서 docker 명령어 테스트</h1><p>브라우저에서 <a href="http://localhost:8200" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8200</a> 에 접속해보자.</p>
<p><img src="/images/2019/Untitled-ce71b9bd-7bfc-4210-b260-1b13e5ee65ae.png" alt></p>
<p>일반적인 jenkins 초기화면이 나온다 초기 비밀번호를 찾아서 넣어주자.</p>
<p><img src="/images/2019/Untitled-606e3efe-c702-4e8d-b0f6-807ab375f723.png" alt></p>
<p>공식 jenkins 이미지를 사용하므로 플러그인도 잘 설치가 된다.</p>
<p><img src="/images/2019/Untitled-a069af1b-b823-45b7-a44f-e61ec66b4de7.png" alt></p>
<p><img src="/images/2019/Untitled-0e608340-7ada-44b0-938b-8b05b1bb2f3b.png" alt></p>
<p>관리자 정보를 입력하고 save and Continue 를 눌러주자.</p>
<p><img src="/images/2019/Untitled-9361a08e-dbf3-44a9-add0-d5a09d2bacfa.png" alt></p>
<p><img src="/images/2019/Untitled-616230d9-2bec-48d6-9c28-6f524183433b.png" alt></p>
<p><img src="/images/2019/Untitled-47e44134-c97c-4006-90c3-3fad68f7cea3.png" alt></p>
<p>아까 생성했던 관리자 계정으로 로그인하자.</p>
<p><img src="/images/2019/Untitled-86233454-b732-453c-a727-9f812bb33bd1.png" alt></p>
<p>위처럼 정상적으로 젠킨스가 동작한다.</p>
<p>만약 화면이 하얀색으로 멈춰 있거나 먹통이 되면 docker-compose stop → docker-compose start 로 컨테이너를 재시작 해보길 바란다.</p>
<p>이제 간단한 job을 만들어서 docker 명령어가 jenkins에서 호출되는지 확인해보자.</p>
<p><img src="/images/2019/Untitled-bf57a312-cb18-4e43-a155-fd9f52b56938.png" alt></p>
<p><img src="/images/2019/Untitled-6a04f72e-f728-4663-b100-2ca8f6df745e.png" alt></p>
<p><img src="/images/2019/Untitled-89042855-7749-4983-914e-61f7198f62c4.png" alt></p>
<p><img src="/images/2019/Untitled-8449685a-5b28-4b64-914b-301e41477c98.png" alt></p>
<p><img src="/images/2019/Untitled-8fa9c6d1-b947-4e87-8411-c5adb83fe233.png" alt></p>
<p>빨간 줄만 따라가면된다. Execute shell에 docker ps 입력하고 저장을 눌러 job을 저장하자.</p>
<p><img src="/images/2019/Untitled-73ed3298-0b66-4015-8ec9-3d27e155cea8.png" alt></p>
<p>이렇제 잡이 생성되면 들어가서 </p>
<p><img src="/images/2019/Untitled-5481ec9a-8bcf-4fbb-86e6-1734729d1a32.png" alt></p>
<p>Build now눌러서 결과를 확인하자.</p>
<p><img src="/images/2019/Untitled-bfbdc836-e6ac-45de-8d46-f750b1036465.png" alt></p>
<p>짜잔 jenkins에서 docker ps 명령어가 동작한 것을 확인 할 수 있다.</p>
<p>앞서 말했듯이 jenkins 컨테이너에서 호스트 docker를 빌려 쓰므로 현재 호스트의 docker ps 가 동작하고 그 결과가 나온다.</p>
<p>끝!</p>
<p>참고자료중 </p>
<p><a href="https://getintodevops.com/blog/the-simple-way-to-run-docker-in-docker-for-ci" target="_blank" rel="external nofollow noopener noreferrer">https://getintodevops.com/blog/the-simple-way-to-run-docker-in-docker-for-ci</a> </p>
<p>를 가장 많이 참고했다.</p>
<h1 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h1><p><a href="https://getintodevops.com/blog/the-simple-way-to-run-docker-in-docker-for-ci" target="_blank" rel="external nofollow noopener noreferrer">https://getintodevops.com/blog/the-simple-way-to-run-docker-in-docker-for-ci</a></p>
<p><a href="https://medium.com/@NovaWoo/docker-%EC%99%80-jenkins-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-ci-1-9510178a525f" target="_blank" rel="external nofollow noopener noreferrer">https://medium.com/@NovaWoo/docker-와-jenkins-를-사용한-안드로이드-ci-1-9510178a525f</a></p>
<p><a href="https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose#docker-compose.yml-%ED%8C%8C%EC%9D%BC" target="_blank" rel="external nofollow noopener noreferrer">https://www.44bits.io/ko/post/almost-perfect-development-environment-with-docker-and-docker-compose#docker-compose.yml-파일</a></p>
<p><a href="https://github.com/jenkinsci/docker" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/jenkinsci/docker</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/13/docker-20191013-docker-compose-ubuntu-jenkins/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/13/docker-20191013-docker-compose-ubuntu-jenkins/" class="post-title-link" itemprop="url">docker compose로 ubuntu에 jenkins 설치하기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-13 01:54:15" itemprop="dateCreated datePublished" datetime="2019-10-13T01:54:15+09:00">2019-10-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>가상머신 ubuntu 18.04 에 docker compose를 이용해서 jenkins를 설치해보도록 하겠다.</p>
<p>기본적으로 ubuntu에 docker와 docker-compose 가 설치되어 있어야 한다.</p>
<h1 id="1-docker-관리용-폴더구조-만들기"><a href="#1-docker-관리용-폴더구조-만들기" class="headerlink" title="1.docker 관리용 폴더구조 만들기"></a>1.docker 관리용 폴더구조 만들기</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker</span><br><span class="line">|-- jenkins</span><br><span class="line">  |-- jenkins-home</span><br><span class="line">  |-- docker-compose.yml</span><br></pre></td></tr></table></figure>
<p>jenkins-home은 jenkins 컨테이어의 볼륨을 연결할 호스트 디렉토리이다.</p>
<p>컨테이너가 동작하면서 jenkins-home에 파일을 작성할 텐데 혹시나 발생할 문제에 대비해 jenkins-home 권한을 풀어주자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 777 jenkins-home</span><br></pre></td></tr></table></figure>
<h1 id="2-docker-compose-yml-파일-생성"><a href="#2-docker-compose-yml-파일-생성" class="headerlink" title="2.docker-compose.yml 파일 생성"></a>2.docker-compose.yml 파일 생성</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">version: &#39;2&#39;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  jenkins:</span><br><span class="line">    image: &#39;jenkins&#x2F;jenkins:latest&#39;</span><br><span class="line">    container_name: &#39;jenkins&#39;</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - &#39;8100:8080&#39;</span><br><span class="line">      - &#39;50100:50000&#39;</span><br><span class="line">    expose:</span><br><span class="line">      - &#39;8080&#39;</span><br><span class="line">      - &#39;50000&#39;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#39;.&#x2F;jenkins_home:&#x2F;var&#x2F;jenkins_home&#39;</span><br><span class="line">    environment:</span><br><span class="line">      TZ: &quot;Asia&#x2F;Seoul&quot;</span><br><span class="line">networks:</span><br><span class="line">  default:</span><br><span class="line">    external:</span><br><span class="line">      name: devops</span><br></pre></td></tr></table></figure>
<p>혹시나 사용할까 해서 docker network를 생성하자.</p>
<p>아래 명령으로 명령으로 docker network를 생성할 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker network create devops</span><br></pre></td></tr></table></figure>
<p>아래처럼 생성한 docker network 를 확인 할 수 있다.</p>
<p><img src="/images/2019/Untitled-b65ee70b-82ae-4951-afe4-0bbc4c72d754.png" alt></p>
<h1 id="3-jenkins-docker-컨테이너-생성"><a href="#3-jenkins-docker-컨테이너-생성" class="headerlink" title="3. jenkins docker 컨테이너 생성"></a>3. jenkins docker 컨테이너 생성</h1><p>docker-compose.yml이 있는 경로에서 아래 명령으로 컨테이너를 생성하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>
<p><img src="/images/2019/Untitled-be77d754-1528-40b1-828c-7404f9a1ecc5.png" alt></p>
<p>위처럼 젠킨스 실행을 확인했다.</p>
<p>브라우저에서 <a href="http://localhost:8100" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8100</a> 으로 접근해보자.</p>
<p><img src="/images/2019/Untitled-ba370f07-b265-4094-bb60-e2924dfc757e.png" alt></p>
<p>젠킨스 동작을 확인 할 수 있다.</p>
<p>docker/jenkins-home/secrets/initialAdminPassword 파일을 열어보면 초기화 비밀번호를 확인 할수 있다.</p>
<p>해당 파일을 찾아 비밀번호를 입력해주자.</p>
<p>이 다음부터는 일반적인 젠킨스와 동일하다.</p>
<p><img src="/images/2019/Untitled-488bc5ef-82aa-4dc7-b9ab-755a1f760dee.png" alt></p>
<p><img src="/images/2019/Untitled-42525c0f-7ff4-493f-aba8-f164dffb8f2d.png" alt></p>
<p>끝!!!</p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/13/docker-20191013-docker-compose-gitlab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/13/docker-20191013-docker-compose-gitlab/" class="post-title-link" itemprop="url">ubuntu18.04에 docker compose로 gitlab 설치하기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-13 00:41:08" itemprop="dateCreated datePublished" datetime="2019-10-13T00:41:08+09:00">2019-10-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ubuntu에-docker-compose로-gitlab-설치하기"><a href="#ubuntu에-docker-compose로-gitlab-설치하기" class="headerlink" title="ubuntu에 docker compose로 gitlab 설치하기"></a>ubuntu에 docker compose로 gitlab 설치하기</h1><h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>가상머신의 ubuntu18.04에 docker compose를 통해서 gitlab 서버를 설치해 보겠다.</p>
<p>ubuntu에 미리 docker, docker-compose 가 설치되어 있어야 한다.</p>
<h1 id="1-docker-관리-폴더-만들기"><a href="#1-docker-관리-폴더-만들기" class="headerlink" title="1.docker 관리 폴더 만들기"></a>1.docker 관리 폴더 만들기</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker</span><br><span class="line">|-- gitlab</span><br><span class="line">  |-- gitlab-data</span><br><span class="line">  |    | -- backups</span><br><span class="line">  |    | -- config</span><br><span class="line">  |    | -- data</span><br><span class="line">  |    | -- logs </span><br><span class="line">  |-- docker-compose.yml</span><br></pre></td></tr></table></figure>

<p>docker-compose.yml 파일과 컨테이너와 연결할 호스트 볼륨을 저장할 gitlab-data 폴더를 생성했다.</p>
<h1 id="2-docker-compose-yml"><a href="#2-docker-compose-yml" class="headerlink" title="2. docker-compose.yml"></a>2. docker-compose.yml</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">web:</span><br><span class="line">  image: &#39;gitlab&#x2F;gitlab-ce:latest&#39;</span><br><span class="line">  restart: always</span><br><span class="line">  container_name: &#39;gitlab&#39;</span><br><span class="line">  hostname: &#39;127.0.0.1&#39;</span><br><span class="line">  environment:</span><br><span class="line">    GITLAB_OMNIBUS_CONFIG: |</span><br><span class="line">      external_url &#39;http:&#x2F;&#x2F;127.0.0.1:8929&#39;</span><br><span class="line">      gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] &#x3D; 2224</span><br><span class="line">  ports:</span><br><span class="line">    - &#39;8929:8929&#39;</span><br><span class="line">    - &#39;2224:22&#39;</span><br><span class="line">  volumes:</span><br><span class="line">    - &#39;.&#x2F;gitlab-data&#x2F;config:&#x2F;etc&#x2F;gitlab&#39;</span><br><span class="line">    - &#39;.&#x2F;gitlab-data&#x2F;logs:&#x2F;var&#x2F;log&#x2F;gitlab&#39;</span><br><span class="line">    - &#39;.&#x2F;gitlab-data&#x2F;data:&#x2F;var&#x2F;opt&#x2F;gitlab&#39;</span><br><span class="line">    - &#39;.&#x2F;gitlab-data&#x2F;backups:&#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;backups&#39;</span><br></pre></td></tr></table></figure>

<p>gitlab 공식 사이트에 가면 gitlab을 위한 docker-compose 파일을 제공한다.</p>
<p>그걸 받아서 볼륨과 포트정도만 수정했다.</p>
<p>위 127.0.0.1로 설정된 부분은 필요한데로 고정아이피를 넣어주면 된다. </p>
<p>지금은 실습을 위해 그냥 로컬호스트아이피로 박았다.</p>
<p>참고로 external_url에 설정된 ULR은 나중에 gitlab서버에서 생성된 리파지토리의 clone할 URL로 제공된다.</p>
<h1 id="3-혹시나-해서-gitlab-data-권한부여"><a href="#3-혹시나-해서-gitlab-data-권한부여" class="headerlink" title="3.혹시나 해서 gitlab-data 권한부여"></a>3.혹시나 해서 gitlab-data 권한부여</h1><p>이건 내가 공부가 적어 잘 모르겠다.</p>
<p>혹시 컨테이너 실행시 볼륨에 파일을 쓰면서 권한 오류가 발생할까 싶어, gitlab-data 폴더에 777권한을 부여 할 것이다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 777 gitlab-data</span><br></pre></td></tr></table></figure>
<p>-R 옵션은 gitlab-data폴더와 하위 폴더 모두에 한꺼번에 권한을 주는 옵션이다.</p>
<p><img src="/images/2019/Untitled-4acbcbd0-73e5-4710-891b-7166d109aa71.png" alt></p>
<h1 id="4-gitlab-도커-컨테이너-올리기"><a href="#4-gitlab-도커-컨테이너-올리기" class="headerlink" title="4. gitlab 도커 컨테이너 올리기"></a>4. gitlab 도커 컨테이너 올리기</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>
<p>위 명령어로 gitlab 도커 컨테이너를 올리자.</p>
<p><img src="/images/2019/Untitled-3f064605-782c-4f8d-a9ed-a1009c37ff20.png" alt></p>
<p>위처럼 빨리 done이라 나오지만 gitlab은 컨테이너가 부트가 되는 시간이 좀 길다.</p>
<p>로그를 확인해보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose logs -f -t --tail&#x3D;&quot;all&quot;</span><br></pre></td></tr></table></figure>
<p><img src="/images/2019/Untitled-4f6a3199-467a-4f8f-9bd0-7225d5b950ee.png" alt></p>
<p>한참 로그가 나오다가 위처럼 http에 관한 로그가 나오기 시작하면 접속이 가능한 상태가 된다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose ps</span><br></pre></td></tr></table></figure>
<p>위 명령어로 컨테이너 상태를 확인해보자.</p>
<p><img src="/images/2019/Untitled-fc936bcf-cc1c-4e7c-952b-bbbfc824ccc7.png" alt></p>
<p>status가 up으로 되어있으면 정상인 것이다. </p>
<p>문제가 있는경우 계속 starting 인 경우가 있으니, 그땐 로그를 보고 해결책을 찾아야 한다.</p>
<h1 id="5-gitlab에-접속해서-컨테이너-동작-확인하기"><a href="#5-gitlab에-접속해서-컨테이너-동작-확인하기" class="headerlink" title="5. gitlab에 접속해서 컨테이너 동작 확인하기."></a>5. gitlab에 접속해서 컨테이너 동작 확인하기.</h1><p>브라우저에 <a href="http://127.0.0.1:8928" target="_blank" rel="external nofollow noopener noreferrer">http://127.0.0.1:8928</a> 로 접속해보자.</p>
<p><img src="/images/2019/Untitled-e27e4082-3782-4052-a6a8-7acde856c114.png" alt></p>
<p>root 계정의 비밀번호를 입력해주자.</p>
<p><img src="/images/2019/Untitled-9e112f2d-52f2-433a-8fa7-87c814b80b8d.png" alt></p>
<p>그 다음 root/방금생성한 비멀번호 를 입력해서 로그인하자.</p>
<p>그러면 Administrator 로 로그인 하게 된다.</p>
<p>아래는 테스트 프로젝트를 push 해서 동작을 확인한 화면이다.</p>
<p><img src="/images/2019/Untitled-717368c4-f393-471a-b9f7-60e1f3b7bb50.png" alt></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/12/docker-20191012-docker-compose-ubuntu-nexus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/12/docker-20191012-docker-compose-ubuntu-nexus/" class="post-title-link" itemprop="url">dockercompose로 ubuntu에 nexus 설치하기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-12 22:01:46" itemprop="dateCreated datePublished" datetime="2019-10-12T22:01:46+09:00">2019-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:11" itemprop="dateModified" datetime="2020-04-16T01:50:11+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ubuntu-1804-dockercompose-nexus-설치"><a href="#ubuntu-1804-dockercompose-nexus-설치" class="headerlink" title="ubuntu 1804 dockercompose nexus 설치"></a>ubuntu 1804 dockercompose nexus 설치</h1><h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>ubuntu 18.04 버전에 docker compose를 사용해서 nexus를 도커로 설치하고 실행해 보려 한다.</p>
<p>미리 ubuntu에 docker와 docker compose 가 미리 설치되어 있어야 한다. 해당 내용은 이 글에 포함되어 있지 않다.</p>
<h1 id="실습"><a href="#실습" class="headerlink" title="실습"></a>실습</h1><h2 id="1-도커-관리용-폴더-만들기"><a href="#1-도커-관리용-폴더-만들기" class="headerlink" title="1. 도커 관리용 폴더 만들기"></a>1. 도커 관리용 폴더 만들기</h2><p>생성할 도커 컨테이너의 설정파일과 볼륨을 관리하기 위해 폴더를 만들 것이다.</p>
<p>나느 아래처럼 홈디렉토리에 생성할 것이다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~&#x2F;docker&#x2F;nexus&#x2F;nexus-data</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-70ca2a61-754c-4167-94e9-4ec44da6b194.png" alt></p>
<p>그리고 nexus폴더 내부에 docker-compose.yml 파일을 생성하고, 그 내용을 아래처럼 만들어 준다.</p>
<h1 id="2-docker-compose-yml-파일"><a href="#2-docker-compose-yml-파일" class="headerlink" title="2. docker-compose.yml 파일"></a>2. docker-compose.yml 파일</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">version: &#39;2&#39;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  nexus3:</span><br><span class="line">    image: &#39;sonatype&#x2F;nexus3:latest&#39;</span><br><span class="line">    container_name: &#39;nexus3&#39;</span><br><span class="line">    restart: always</span><br><span class="line">    expose:</span><br><span class="line">      - &#39;8081&#39;</span><br><span class="line">    ports:</span><br><span class="line">      - &#39;8081:8081&#39;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#39;.&#x2F;nexus-data:&#x2F;nexus-data&#39;</span><br><span class="line">    environment:</span><br><span class="line">      TZ: &quot;Asia&#x2F;Seoul&quot;</span><br><span class="line">networks:</span><br><span class="line">  default:</span><br><span class="line">    external:</span><br><span class="line">      name: devops</span><br></pre></td></tr></table></figure>

<p>포트를 8081로 셋팅하였고, nexus-data를 /home/docker/nexus-data 에 볼륨으로 연결 하였다.</p>
<p>네트워크를 쓸지는 모르겠지만 devops로 설정했다. </p>
<p>다음 명령어로 devops라는 docker network를 생성하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker network create devops</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-b3949388-6c87-4d76-9cff-53be3d0aae86.png" alt></p>
<h2 id="3-docker-compose-yml로-nexus-컨테이너-생성"><a href="#3-docker-compose-yml로-nexus-컨테이너-생성" class="headerlink" title="3. docker-compose.yml로 nexus 컨테이너 생성"></a>3. docker-compose.yml로 nexus 컨테이너 생성</h2><p>아래 명령어를 docker-compose.yml이 있는 경로에서 실행하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>위 명령얼 실행하면 자동으로 nexus 이미지를 다운받고 nexus 컨테이너를 실행 시킬 것이다.</p>
<p><img src="/images/2019/Untitled-6d1f7ace-7f56-4e50-9433-8331ea513494.png" alt></p>
<p>아래 명령으로 docker compose로 실행한 컨테이너를 확인하자.</p>
<p>물론 docker-compose.yml 이 있는 경로에서 명령어를 입력해야 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose ps</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-2862e07c-78ec-4d50-a737-5f759e95fa4f.png" alt></p>
<p>state에 up으로 컨티에너가 실행 되었다는 것을 알 수 있다.</p>
<p>docker-compose.yml 파일이 있는 경로에서 아래 명령어를 치면 해당 컨테이너의 log를 볼수도 있다. 만약 컨테이너에 문제가 있다고 생각하면 로그를 확인 하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose logs -f -t --tail&#x3D;&quot;all&quot;</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-6f653713-f6c7-47a6-acde-02b79834e0ac.png" alt></p>
<p>음 브라우저에 아래 주소로</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8081</span><br></pre></td></tr></table></figure>

<p>접근했는데 페이지가 열리지 않아서 로그를 확인해보니 위와 같은 오류가 로그로 나오고 있다.</p>
<p>아마 nexus컨테이너가 동작하면서 호스트의 nexus-data 에 파일을 생성해야 하는데 권한 문제가 있나보다.</p>
<p>일단 실행중인 컨테이너를 멈추고 해당 폴더에 권한을 부여해봐야 겠다.</p>
<p>아래 명령어로 실행시킨 nexus 컨테이너를 정지 시키자.</p>
<p>물론 docker-compose.yml 이 있는 경로에서 실행하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose down</span><br></pre></td></tr></table></figure>

<p>위 명령어로 해당 컨테이너를 종료하고 이미지를 삭제한다.</p>
<p>그리고 아까 생성했던 /home/docker/nexus/nexus-data 폴더의 권한을 수정해보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 777 &#x2F;home&#x2F;docker&#x2F;nexus&#x2F;nexus-data</span><br></pre></td></tr></table></figure>

<p>무언가 도커에 다른 방법이 있을거 같은데, 나는 공부가 적어 위처럼 모든 권한을 다 부여했다.</p>
<p><img src="/images/2019/Untitled-a01c1e7b-d781-4ab0-b263-0c4eb82e99fc.png" alt></p>
<p>다시 도커 컨테이너를 올려보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure>

<p>그리고 로그를 확인해보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose logs -f -t --tail&#x3D;&quot;all&quot;</span><br></pre></td></tr></table></figure>

<p><img src="/images/2019/Untitled-2b91f682-0a09-4ee5-b30b-c2f91e0a7935.png" alt></p>
<p>뭔가 에러 없이 넥서스가 실행 되었다고 나온다.</p>
<p>이제 브라우저에서 <a href="http://localhost:8081" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8081</a>로 접근해보자.</p>
<p><img src="/images/2019/Untitled-c93cc593-fb0e-435a-a1e1-d32689faa5d1.png" alt></p>
<p>위 처럼 동작을 확인 할 수 있다.</p>
<p>우측 오른쪽의 sign in 을 클릭하면 다음처럼 나온다.</p>
<p><img src="/images/2019/Untitled-2859049b-05c1-4a71-8277-dd2f83453e2d.png" alt></p>
<p>/nexus-data/admin.password 파일을 확인해서 admin의 비밀번호를 확인해 보라고 한다.</p>
<p>예전 버전의 nexus는 기본으로 admin/1234 인데 요즘 버전은 이렇게 나온다.</p>
<p>초기에 생성한 볼륨 폴더인 /home/docker/nexus/nexus-data 폴더로 이동해보자.</p>
<p><img src="/images/2019/Untitled-6858174d-4044-4f89-a284-30072790b543.png" alt></p>
<p>admin.password 파일이 있다. 해당 파일을 열어보면 admin 초기 비밀번호가 나온다.</p>
<p>admin/초기비밀번호를 입력하면 새로 생성한 넥서스에 관리자로 로그인 할 수 있다.</p>
<p>로그인에 성공하면 다음처럼 나온다.</p>
<p><img src="/images/2019/Untitled-b1c4ba78-aa53-465a-9981-16bbb19314af.png" alt></p>
<p>새 비밀번호를 입력한다.</p>
<p><img src="/images/2019/Untitled-421a9f44-549a-4a33-a3a5-f48e4e2fe97a.png" alt></p>
<p>그리고 대충 next 버튼을 눌러주면 된다. </p>
<h2 id="4-이제-관리는-어떻게"><a href="#4-이제-관리는-어떻게" class="headerlink" title="4. 이제 관리는 어떻게?"></a>4. 이제 관리는 어떻게?</h2><p>도커 컨테이너의 볼륨을 호스트와 연결했으니, 컨테이너를 지워도 호스트 볼륨이 살아 있으니, 문제 없다.</p>
<p>나중에 백업을 하거나 컨테이너를 다른곳으로 옮겨야 할 경우 /home/docker 폴더를 전체 복사해서 이동시켜 컨테이너를 올리면 작업중엔 넥서스의 상태를 보존할수 있을거 같다.</p>
<h2 id="5-docker-compose-명령어-요약"><a href="#5-docker-compose-명령어-요약" class="headerlink" title="5. docker compose 명령어 요약"></a>5. docker compose 명령어 요약</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d      &#x2F;&#x2F; 도커컴포즈 컨테이너 생성 및 실행   </span><br><span class="line">docker-compose down       &#x2F;&#x2F; 도커컴포즈 컨테이너 종료 및 삭제</span><br><span class="line"></span><br><span class="line">docker-compose start      &#x2F;&#x2F; 도커컴포즈 컨테이너 실행</span><br><span class="line">docker-compose stop       &#x2F;&#x2F; 도커컴포즈 컨테이너 종료</span><br><span class="line"></span><br><span class="line">docker-compose ps         &#x2F;&#x2F; 도커컴포즈 프로스스 확인</span><br><span class="line">docker-compsos logs -f -t --tail&#x3D;&quot;all&quot;  &#x2F;&#x2F;도커컴포즈 로그 확인</span><br></pre></td></tr></table></figure>
      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/05/ubuntu-20191005-ubuntu-docker-compose-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/05/ubuntu-20191005-ubuntu-docker-compose-install/" class="post-title-link" itemprop="url">ubuntu 18.04 docker compose install</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-05 22:15:54" itemprop="dateCreated datePublished" datetime="2019-10-05T22:15:54+09:00">2019-10-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ubuntu/" itemprop="url" rel="index">
                    <span itemprop="name">ubuntu</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ubuntu-18-04-docker-compose-install"><a href="#ubuntu-18-04-docker-compose-install" class="headerlink" title="ubuntu 18.04 docker compose install"></a>ubuntu 18.04 docker compose install</h1><h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>이전에 ubuntu 18.04 가상머신에 docker 를 설치했다.</p>
<p>윈도우에는 docker for windows로 설치하면 docker와 docker compose 가 한방에 설치되는데, ubuntu에서는 docker compose를 추가로 따로 설치해 줘야 한다.</p>
<p>이번에는 docker compose를 설치 해보려 한다.</p>
<h1 id="ubuntu-18-04-docker-compse-설치하기"><a href="#ubuntu-18-04-docker-compse-설치하기" class="headerlink" title="ubuntu 18.04 docker compse 설치하기"></a>ubuntu 18.04 docker compse 설치하기</h1><p><a href="https://github.com/docker/compose/releases" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/docker/compose/releases</a></p>
<p>일단 위 경로로 가서 최신 docker compose 버전을 살펴보자 rc 버전은(release candidate)로 일종의 베타 버전이라고 한다. </p>
<p>원하는 버전을 선택해서 설치하면 된다.</p>
<pre><code>sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
docker-compose --version</code></pre><p><img src="/images/2019/Untitled-53125fd8-bb2f-42d8-b477-a8e35a8122f8.png" alt></p>
<p>간단하게 설치를 할 수 있다.</p>
<h3 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h3><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-18-04" target="_blank" rel="external nofollow noopener noreferrer">https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-18-04</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

        
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://www.hanumoka.net/2019/10/04/springBoot-20191004-springboot-gradle-multimodule/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Hanumoka">
      <meta itemprop="description" content="아마추어 개발자의 블로그">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hanumoka, IT Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/10/04/springBoot-20191004-springboot-gradle-multimodule/" class="post-title-link" itemprop="url">springboot - gradle을 이용한 멀티모듈 프로젝트 만들기</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">작성일</span>

              <time title="Post created: 2019-10-04 01:54:26" itemprop="dateCreated datePublished" datetime="2019-10-04T01:54:26+09:00">2019-10-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-04-16 01:50:12" itemprop="dateModified" datetime="2020-04-16T01:50:12+09:00">2020-04-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/springBoot/" itemprop="url" rel="index">
                    <span itemprop="name">springBoot</span>
                  </a>
                </span>
            </span>

          

        </div>
        <div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- 헤드 광고 -->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="3292600994" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
      </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="springboot-gradle-멀티모듈-프로젝트-만들기"><a href="#springboot-gradle-멀티모듈-프로젝트-만들기" class="headerlink" title="springboot gradle 멀티모듈 프로젝트 만들기"></a>springboot gradle 멀티모듈 프로젝트 만들기</h1><h1 id="개발환경"><a href="#개발환경" class="headerlink" title="개발환경"></a>개발환경</h1><p>windows10</p>
<p>intelliJ 커뮤니티 버전</p>
<p>jdk1.8</p>
<h1 id="들어가기"><a href="#들어가기" class="headerlink" title="들어가기"></a>들어가기</h1><p>intelliJ 에서 gradle 기반 springboot 멀티 모듈 프로젝트를 한번 만들어보자.</p>
<p>멀티모듈을 어떻게 디자인 해야하는지는 다루지 않고, gradle을 이용해서 어떻게 모듈을 생성하고 모듈간의 의존성을 셋팅을 하는가에 중점을 둔 글이다.</p>
<h3 id="1-인텔리J에서-gradle-프로젝트-생성"><a href="#1-인텔리J에서-gradle-프로젝트-생성" class="headerlink" title="1. 인텔리J에서 gradle 프로젝트 생성"></a>1. 인텔리J에서 gradle 프로젝트 생성</h3><p>일단 intelliJ 에서 gradle 프로젝트를 생성하자.</p>
<p><a href="http://start.spring.io" target="_blank" rel="external nofollow noopener noreferrer">http://start.spring.io</a> 로 이동해서 spring boot gradle 프로젝트를 생성하자.</p>
<p>(나는 인텔리J 커뮤니티 버전을 사용중이라 springboot 프로젝트를 생성할 때 주로 <a href="http://start.spring.io" target="_blank" rel="external nofollow noopener noreferrer">http://start.spring.io</a> 를 주로 사용한다.)</p>
<p>아래처럼 설정하여 프로젝트를 생성하자.</p>
<p><strong>Project</strong> : Gradle Project</p>
<p><strong>Language</strong>: Java</p>
<p><strong>Spring Boot</strong>: 2.1.9(현재 2점대 이상으로 선택하면 될듯)</p>
<p><strong>Project Metadata</strong></p>
<p><strong>Group</strong> : com.hanumoka.go</p>
<p><strong>Artifact</strong> : go-modules</p>
<p><strong>Option</strong> </p>
<p><strong>Packaging</strong>: War</p>
<p><strong>Java</strong> : 8</p>
<p><strong>Dependencies</strong>: Spring web, Thymeleaf</p>
<p>위에서 중요한 부분은 Group이다. </p>
<p>com.hanumoka.go는 이 프로젝트의 공통 패키지이며, Artifact: go-modules 는 실제 생성되는 실행 프로그램을 구별하는 명칭이 아니라 모듈의 묶음일 뿐이다.</p>
<p>개인적으로 프로젝트를 war로 설정해서 생성한 이유는 애시당초 war로 프로젝트를 생성하면 프로젝트 빌드시 war, jar 빌드가 쉽기 때문이다.</p>
<p><img src="/images/2019/Untitled-5341e670-96cc-4c30-87ce-b3b5e1f8f70e.png" alt></p>
<p><img src="/images/2019/Untitled-74760319-2255-4c62-8e0e-420b86d1ff1f.png" alt></p>
<p><img src="/images/2019/Untitled-d9a4929d-6637-4b35-abe6-7f30e72831a3.png" alt></p>
<p>Spring web은 필수이며  Thymeleaf 스프링 컨트롤러의 동작을 확인하기 위해 추가했다.</p>
<p>설정된 값을을 이용해서 압축된 프로젝트를 다운로드 하자.</p>
<p><img src="/images/2019/Untitled-b2e2e41a-d83f-42c6-8d3a-b8be0f1620e9.png" alt></p>
<p>해당 파일을 압축을 풀고 intelliJ로 open하자.</p>
<p><img src="/images/2019/Untitled-cb15ce0d-2329-42a8-a064-88a35931aa4f.png" alt></p>
<p>위처럼 gradle 이 제대로 빌드 되는지 확인하자.</p>
<p>컨트롤러와 html 페이지를 추가해서 스프링 컨트롤러 동작을 한번 시켜보자.</p>
<p>com.hanumoka.go.gomodules 패키지를 선택하고 controller 패키지를 생성하고, HomeController를 생성하고 html을 리다이렉팅 할 수 있는 RequestMapping 메소드를 추가하자.</p>
<p><img src="/images/2019/Untitled-1de55a38-69bf-4f45-aa47-c4b608000a3a.png" alt></p>
<p><img src="/images/2019/Untitled-453cfccc-a5da-4ab9-bc06-32d1dd1da2d8.png" alt></p>
<p>GoModulesApplication 를 선택하고 run 시켜서, <a href="http://localhost:8080" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080</a> 로 접속해서 컨트롤러가 동작하는지 보자.</p>
<p><img src="/images/2019/Untitled-a0b353dd-cff9-46b3-91e9-162e3b25cf80.png" alt></p>
<p><img src="/images/2019/Untitled-c37042c7-7134-4ea7-a560-0d269625b277.png" alt></p>
<p>스프링 컨트롤러가 정상 동작하는 것을 확인 할 수 있다.</p>
<h3 id="2-모듈-추가하기"><a href="#2-모듈-추가하기" class="headerlink" title="2. 모듈 추가하기"></a>2. 모듈 추가하기</h3><p>1번에서 한 일은 그냥 gradle 기반 springboot 프로젝트를 생성하고 동작시킨 것이다.</p>
<p>이제 실제 사용할 모듈을 구상하고 추가하고 셋팅해야 한다.</p>
<p>이 글은 gradle환경에서 springboot 프로젝트에서 모듈을 추가하고 연결하는 설정을 기록하는데 초점을 두고 있다.</p>
<p>따라서 간단하게 Service 모듈과 Controller 모듈을 생성하고 Controller 모듈이 Service 모듈을 사용하는 시나리오로 진행 하겠다.</p>
<p>실제 모듈을 설계하고 구성하는 일은 많은 고심이 필요해 보인다.(이부분은 나중에 좀 연구해 봐야 겠다.)</p>
<p><img src="/images/2019/Untitled-763d4bb6-6264-4ddd-ad37-e1bbf1583016.png" alt></p>
<p>일단 프로젝트 루트 경로의 build.gradle, settigns.gradle 은 프로젝트 전체에 적용되는 설정 파일이다. </p>
<p>사실 gradle을 잘 몰라 자세한 설명을 할 수가 없다. </p>
<p>하지만 이후로 추가될 모듈에 관련된 공통적인 설정은 이 두 파일에 기술된다.</p>
<p><img src="/images/2019/Untitled-0409dc23-9fe8-4d84-af69-622f0b2d146c.png" alt></p>
<p>그리고 프로젝트 루트 경로의 src 폴더는 모듈을 추가함으로써 사라질 예정이다.</p>
<p><img src="/images/2019/Untitled-1bf0b85f-d119-4e8d-8e5a-1ff8ff2e5f39.png" alt></p>
<h3 id="일단-a-module-이라는-이름의-모듈을-추가해보자"><a href="#일단-a-module-이라는-이름의-모듈을-추가해보자" class="headerlink" title="일단 a-module 이라는 이름의 모듈을 추가해보자."></a>일단 a-module 이라는 이름의 모듈을 추가해보자.</h3><p>일단 루트 경로의 settings.gradle을  확인해보자.</p>
<p>아래처럼 루트 프로젝트 네임만 있을 것이다. 나중에 모듈을 추가하면 모듈 정보가 추가될 것이다.</p>
<p>일단 넘어가자.</p>
<pre><code>rootProject.name = &apos;go-modules&apos;</code></pre><p>그리고 루트 경로의 build.gradle 파일을 열어서 내용물을 모두 지우고 아래 내용으로 치환하자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    ext &#123;</span><br><span class="line">        springBootVersion &#x3D; &#39;2.1.9.RELEASE&#39;</span><br><span class="line">    &#125;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:$&#123;springBootVersion&#125;&quot;)</span><br><span class="line">        classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.8.RELEASE&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">subprojects &#123;</span><br><span class="line"></span><br><span class="line">    apply plugin: &#39;java&#39;</span><br><span class="line">    apply plugin: &#39;eclipse&#39;</span><br><span class="line">    apply plugin: &#39;org.springframework.boot&#39;</span><br><span class="line">    apply plugin: &#39;io.spring.dependency-management&#39;</span><br><span class="line"></span><br><span class="line">    group &#x3D; &#39;com.hanumoka.go&#39;</span><br><span class="line">    version &#x3D; &#39;0.0.0&#39;</span><br><span class="line">    sourceCompatibility &#x3D; 1.8</span><br><span class="line"></span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    task initSourceFolders &#123;</span><br><span class="line">        sourceSets*.java.srcDirs*.each &#123;</span><br><span class="line">            if( !it.exists() ) &#123;</span><br><span class="line">                it.mkdirs()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sourceSets*.resources.srcDirs*.each &#123;</span><br><span class="line">            if( !it.exists() ) &#123;</span><br><span class="line">                it.mkdirs()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dependencies &#123;</span><br><span class="line">        compileOnly(&#39;org.projectlombok:lombok&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>buildscript  부분에서 공통 스브링부트 버전등을 설정한다.</p>
<p>subprojects 는 추가될 모듈둘에 공통적으로 적용될 내용들이 기술되어 있다.</p>
<p>이제 a-module 을 추가해보자. 아래처럼 모듈을 클릭하자.</p>
<p><img src="/images/2019/Untitled-64586004-bf5a-4a95-af5d-2c80215154e5.png" alt></p>
<p>아래 내용을 확인하고 next 버튼을 클릭하자.</p>
<p><img src="/images/2019/Untitled-728f02ae-0958-433b-aded-dfc20c6639c0.png" alt></p>
<p>아래처럼 GroupId : com.hanumoka.go</p>
<p>ArtifactId : a-module 를 입력하고 next 를 클릭하자.</p>
<p><img src="/images/2019/Untitled-3919234e-a81d-45fa-a06c-07f35ff6d8c2.png" alt></p>
<p>a-module 이라는 모듈명을 확인하고 Finish 버튼을 클릭하자.</p>
<p><img src="/images/2019/Untitled-cdbb921e-edd1-48e7-8419-f4f584e6e5e6.png" alt></p>
<p>아래처럼 a-module이 추가되었다. 하늘색 작은 상자가 표시 되어 있는데, 이것이 모듈을 의미한다.</p>
<p><img src="/images/2019/Untitled-9e0e20d4-d3d0-4bfb-8da3-b0fa3b9190a0.png" alt></p>
<p>모듈을 추가했으니 프로젝트 루트 경로의 settings.gradle 파일을 열어보자.</p>
<p>아래처럼 include ‘a-module’ 이라는 내용이 자동으로 추가된 것을 확인 할 수 있다.</p>
<p>만약 없다면, 추가해주자.</p>
<p><img src="/images/2019/Untitled-d4e72ab9-3593-449c-8bcf-074294dda1a3.png" alt></p>
<p>그리고 루트 경로의 settings.gradle 파일을 열어보자.</p>
<p>그리고 아래 내용을 추가해주자. 프로젝트해당 모듈이 있다고 등록하는 것이다. 나중에 이 모듈에 대한 디펜던시도 추가할 것이다.</p>
<pre><code>project(&apos;:a-module&apos;) {
}</code></pre><p><img src="/images/2019/Untitled-8ef73c78-899a-4472-acd5-7c4fd6dab19c.png" alt></p>
<p>이제 생성했던 a-module 폴더로 들어가서 a-module 폴더의 build.gradle 파일을 열어보자.</p>
<p>기존의 내용들을 지우고 아래 내용으로 치환하자.</p>
<p>이 파일은 a-module을 위한 독자적인 파일이다.</p>
<pre><code>dependencies {
    compile(&apos;org.springframework.boot:spring-boot-starter-thymeleaf&apos;)
    compile(&apos;org.springframework.boot:spring-boot-starter-web&apos;)
    testCompile(&apos;org.springframework.boot:spring-boot-starter-test&apos;)
}</code></pre><p><img src="/images/2019/Untitled-4f8a1a40-e697-482a-8733-3e0c749dcf7b.png" alt></p>
<p>그리고 아래처럼 모듈 내부의 패키지와 파일들을 구성하자.</p>
<p><img src="/images/2019/Untitled-cc91f841-ef40-40ed-9499-79c23105eb78.png" alt></p>
<p><strong>공통 패키지는 com.hanumoka.go 이다.</strong></p>
<p><strong>BeanScan의 기준이 되는 AmoduleApp.class, ServletInitializer.class 는 이곳이 둬야 한다.</strong></p>
<p>아래 AmoduleApp.class 파일이다.</p>
<pre><code>package com.hanumoka.go;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class AmoduleApp {
    public static void main(String[] args) {
        SpringApplication.run(AmoduleApp.class, args);
    }
}</code></pre><p>아래 ServletInitializer.class 파일이다.</p>
<pre><code>package com.hanumoka.go;

import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;

public class ServletInitializer extends SpringBootServletInitializer {

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(AmoduleApp.class);
    }

}</code></pre><p>아래 HomeController.class 이다.</p>
<p>추가한 a-module을 다른 모듈과 구분하기 위해 amodule 을 추가했다.</p>
<pre><code>package com.hanumoka.go.amodule.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {

    @RequestMapping(&quot;/&quot;)
    public String index(){
        return &quot;index&quot;;
    }
}</code></pre><p>기존에 루트 경로에 있던 src 폴더 내부를 옮겨와서 AmoduleApp 파일명만 변경한 것이다.</p>
<p>그리고 루트 경로의 src 폴더를 제거하자.</p>
<p>지금까지 작업은 기존의 단일 프로젝트의 src를 a-module로 옮긴것이다.</p>
<p>AmoduleApp 을 실행 하면, 스프링 앱이 동작하고 <a href="http://localhost:8080" target="_blank" rel="external nofollow noopener noreferrer">http://localhost:8080</a> 접근시 index.html 이 보여야 한다.</p>
<p>지금까지 한 작업으로 springboot 단일 프로젝트를 springboot 모듈 프로젝트로 변경 되었다.</p>
<p>이제 b-module을 추가하고 a-module에서 b-module을 사용하는 구조로 만들어보자.</p>
<h3 id="b-module-이라는-모듈-추가하기"><a href="#b-module-이라는-모듈-추가하기" class="headerlink" title="b-module 이라는 모듈 추가하기"></a>b-module 이라는 모듈 추가하기</h3><p>앞서 a-module 추가하듯이 b-module도 추가하자.</p>
<p>아래와 같은 구조가 될 것이고, src 폴더는 앞에서 말한것 처럼 제거 했다.</p>
<p><img src="/images/2019/Untitled-eb7e58f7-4c94-4821-9647-63d58d52c801.png" alt></p>
<p>루트 경로에 settings.gradle 폴더르르 보면 역시 b-module 이 추가된 것을 볼 수 있다.</p>
<p><img src="/images/2019/Untitled-2a9d2015-3aa7-4c45-ae73-e04758fb8bcb.png" alt></p>
<p>루트 경로의 build.gradle 에 가서 앞서 등록했던 a-module에 dependencies 를 방금 추가한 b-module 로 추가하자.</p>
<p>해당 내용은 a-modul이 b-module에 의존성을 갖는다는 것이다.</p>
<pre><code>project(&apos;:a-module&apos;) {
    dependencies {
        compile project(&apos;:b-module&apos;)
    }
}</code></pre><p><img src="/images/2019/Untitled-a5baeacc-585a-4ad5-90dd-24effcf2ab22.png" alt></p>
<p>b-module을 열고 아래처럼 구성하자.</p>
<p>b-module은 a-module에서 사용할 서비스로 Bservice.class를 제공한다.</p>
<p><img src="/images/2019/Untitled-e2cf2f53-0c69-4946-b61f-ffb807c0fdfd.png" alt></p>
<p>Bservice.class</p>
<pre><code>package com.hanumoka.go.bmodule.service;

import org.springframework.stereotype.Service;

@Service
public class Bservice {
    public String test(){
        return &quot;Bservice test()...&quot;;
    }
}</code></pre><p>그리고 b-module 하위이 build.gradle 을 아래로 치환 했다.</p>
<pre><code>bootJar{
    enabled = false;
}
jar {
    enabled = true;
}

dependencies {
    compile(&apos;org.springframework.boot:spring-boot-starter&apos;)
}</code></pre><h3 id="A-module-컨트롤러에서-B-module-서비스를-사용해보자"><a href="#A-module-컨트롤러에서-B-module-서비스를-사용해보자" class="headerlink" title="A-module 컨트롤러에서 B-module 서비스를 사용해보자."></a>A-module 컨트롤러에서 B-module 서비스를 사용해보자.</h3><p>A-module의 HomeController.class를 아래처럼 수정하자.</p>
<pre><code>package com.hanumoka.go.amodule.controller;

import com.hanumoka.go.bmodule.service.Bservice;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {

    @Autowired
    Bservice bservice;

    @RequestMapping(&quot;/&quot;)
    public String index(){

        System.out.println(bservice.test());
        return &quot;index&quot;;
    }
}</code></pre><p><img src="/images/2019/Untitled-c078d4ae-a987-432f-857e-3aa2797fcdbd.png" alt></p>
<p>이제 a-module의 AmoduleApp을 실행해서 a-module의 컨트롤러가 동작할때 b-module의 서비스를 호출하는지 확인해보자.</p>
<p>아래처럼 동작을 확인 할 수 있다.</p>
<p><img src="/images/2019/Untitled-f2b2ebe0-c361-4915-86dc-2941cf8b1bfc.png" alt></p>
<p>go-module 을 빌드하면 아래처럼 a-module 의 빌드 결과물을 확인 할 수 있다.</p>
<p>화면에는 안 보이지만 b-module 역시 빌드 결과물이 생겼다.</p>
<p>하지만 a-module에만 SpringBootApplication을 등록했으므로, 실제 실행 시킬수 있는 jar 파일은</p>
<p>a-module-0.0.0.jar 이다.</p>
<p><img src="/images/2019/Untitled-97d20444-23a5-49dc-b013-d79fa718d076.png" alt></p>
<p>직접 jar를 실행시켜, 정상동작을 확인하자.</p>
<pre><code>java -jar a-module-0.0.0.jar </code></pre><h3 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h3><p>이 글에서는 간단하게 gradle 기반으로 spring boot 멀티 모듈을 구축하는 방법을 정리하였다.</p>
<p>사실 실제 멀티 모듈을 설계하고 구축하는 일은 어려운 일이고, 많은 고민이 필요해 보인다.</p>
<p>하지만 나처럼 gradle 자체를 잘 모르는 사람은 실제 구축 자체가 어려운 일이므로 이렇게 기록해 놓는다.</p>
<p><strong>해당 예제는 아래 github에 올려놓았다.</strong></p>
<p><a href="https://github.com/hanumoka/springboot_gradle_multimodule" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/hanumoka/springboot_gradle_multimodule</a></p>
<h3 id="참고자료"><a href="#참고자료" class="headerlink" title="참고자료"></a>참고자료</h3><p><a href="https://bkjeon1614.tistory.com/38" target="_blank" rel="external nofollow noopener noreferrer">https://bkjeon1614.tistory.com/38</a></p>

      
      
          
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>

  
      


  
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="이전 페이지"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="다음 페이지"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          흝어보기
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Hanumoka</p>
  <div class="site-description" itemprop="description">아마추어 개발자의 블로그</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">199</span>
          <span class="site-state-item-name">포스트</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">카테고리</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">556</span>
        <span class="site-state-item-name">태그</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hanumoka" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hanumoka" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:amagramer@gmail.com" title="E-Mail → mailto:amagramer@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    <div>
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- 왼쪽 사이드 광고 -->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6388187282606796" data-ad-slot="9032012837" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    </div>
    
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hanumoka</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
